const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/QRCodeSVG-ukF-lImR.js","static/sanity-BAwwqgd6.js","static/LiveQueries-D4psNZkn.js","static/DisplayedDocumentBroadcaster-PdKTS-vU.js","static/PostMessageDocuments-76WbPwKI.js","static/PostMessageRefreshMutations-BvV7oQ3-.js","static/PostMessagePerspective-B36o3MF2.js","static/PostMessagePreviewSnapshots-BoYq6yzb.js","static/PostMessageSchema-CnkCcs0D.js","static/PostMessageTelemetry-P09juzds.js"])))=>i.map(i=>d[i]);
import{a0 as qn,a1 as Fn,aT as ct,aU as Vn,r as y,aV as qt,aW as Bn,j as u,aX as Hn,aY as nn,aZ as rn,a_ as yt,a$ as Ie,b0 as Qe,b1 as De,b2 as Kn,b3 as lt,b4 as Gn,b5 as Xn,as as bt,b6 as ut,b7 as sn,b8 as St,b9 as Qn,ba as Yn,bb as wt,bc as Jn,bd as Zn,be as er,bf as _t,bg as jt,bh as Ue,bi as Ne,bj as Et,bk as Rt,bl as $e,bm as qe,bn as Ct,at as an,bo as tr,bp as on,bq as nr,br as rr,a as L,k as ve,bs as ye,i as cn,bt as sr,bu as ln,u as Be,bv as ar,a9 as Tt,bw as un,l as It,bx as or,by as ir,bz as cr,A as lr,n as dn,bA as ur,bB as Ft,bC as pn,bD as mn,a2 as dr,bE as pr,bF as mr,F as ne,bG as hr,bH as He,bI as hn,bJ as at,bK as fr,bL as gr,bM as vr,bN as yr,bO as br,p as pe,bP as kt,bQ as At,bR as wr,bS as fn,bT as Vt,bU as xr,bV as Pr,C as ue,bW as gn,bX as Ke,ae as Se,h as Ze,T as X,S as Oe,Y as et,f as tt,ag as Ae,bY as Mt,bZ as Sr,b_ as _r,b$ as jr,c0 as Er,O as Rr,o as de,b as Cr,c1 as ot,c2 as Tr,c3 as Ir,G as kr,c4 as Fe,c5 as vn,c6 as Ar,c7 as Mr,t as $r,c8 as Or,M as Lr,c9 as zr,ca as yn,cb as bn,cc as Wr,cd as Ur,ai as Dr,ce as Nr,cf as qr,cg as Fr,aJ as Vr,U as Br,ch as Hr,q as Kr,ci as wn,cj as $t,ck as Gr,an as xn,cl as Xr,a3 as Pn,aK as Sn,ar as Qr,cm as Yr,cn as Jr,co as Zr,cp as es,cq as ts,cr as ns,cs as rs,ct as ss}from"./sanity-BAwwqgd6.js";import{D as as,i as os}from"./DisplayedDocumentBroadcaster-PdKTS-vU.js";function is(n,e){return e===void 0&&(e=null),e=e??n,qn(function(t,s){var r=[],a=0;t.subscribe(Fn(s,function(o){var i,l,c,p,d=null;a++%e===0&&r.push([]);try{for(var h=ct(r),m=h.next();!m.done;m=h.next()){var g=m.value;g.push(o),n<=g.length&&(d=d??[],d.push(g))}}catch(f){i={error:f}}finally{try{m&&!m.done&&(l=h.return)&&l.call(h)}finally{if(i)throw i.error}}if(d)try{for(var b=ct(d),v=b.next();!v.done;v=b.next()){var g=v.value;Vn(r,g),s.next(g)}}catch(f){c={error:f}}finally{try{v&&!v.done&&(p=b.return)&&p.call(b)}finally{if(c)throw c.error}}},function(){var o,i;try{for(var l=ct(r),c=l.next();!c.done;c=l.next()){var p=c.value;s.next(p)}}catch(d){o={error:d}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}s.complete()},void 0,function(){r=null}))})}function cs({children:n,isValidProp:e,...t}){e&&Hn(e),t={...y.useContext(qt),...t},t.isStatic=Bn(()=>t.isStatic);const s=y.useMemo(()=>t,[JSON.stringify(t.transition),t.transformPagePoint,t.reducedMotion]);return u.jsx(qt.Provider,{value:s,children:n})}const te=[];for(let n=0;n<256;++n)te.push((n+256).toString(16).slice(1));function ls(n,e=0){return(te[n[e+0]]+te[n[e+1]]+te[n[e+2]]+te[n[e+3]]+"-"+te[n[e+4]]+te[n[e+5]]+"-"+te[n[e+6]]+te[n[e+7]]+"-"+te[n[e+8]]+te[n[e+9]]+"-"+te[n[e+10]]+te[n[e+11]]+te[n[e+12]]+te[n[e+13]]+te[n[e+14]]+te[n[e+15]]).toLowerCase()}let dt;const us=new Uint8Array(16);function ds(){if(!dt){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");dt=crypto.getRandomValues.bind(crypto)}return dt(us)}const ps=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Bt={randomUUID:ps};function We(n,e,t){var r;if(Bt.randomUUID&&!n)return Bt.randomUUID();n=n||{};const s=n.random??((r=n.rng)==null?void 0:r.call(n))??ds();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,ls(s)}const Ht=n=>({context:e})=>{const{count:t,include:s,exclude:r,responseType:a="message.received"}=n;return{count:t,domain:e.domain,from:e.connectTo,include:s?Array.isArray(s)?s:[s]:[],exclude:r?Array.isArray(r)?r:[r]:[],responseType:a,target:e.target,to:e.name}},ms=n=>e=>{const{data:t}=e;return(n.include.length?n.include.includes(t.type):!0)&&(n.exclude.length?!n.exclude.includes(t.type):!0)&&t.domain===n.domain&&t.from===n.from&&t.to===n.to&&(!n.target||e.source===n.target)},hs=n=>e=>({type:n,message:e}),fs=Xn(()=>wt(window,"message")),_n=n=>rn(({input:e})=>fs.pipe(n?bt(n):ut(),sn(ms(e)),bt(hs(e.responseType)),e.count?ut(is(e.count),Qn(t=>t),St(e.count)):ut())),Ot="sanity/comlink",gs=3e3,vs=500,Ve="comlink/response",nt="comlink/heartbeat",Lt="comlink/disconnect",zt="comlink/handshake/syn",Wt="comlink/handshake/syn-ack",Ut="comlink/handshake/ack",ys=n=>e=>e.pipe(St(1),bt(()=>{throw new Error(n)})),jn=()=>nn({actors:{listen:rn(({input:n})=>{const e=n.signal?wt(n.signal,"abort").pipe(ys(`Request ${n.requestId} aborted`)):Jn,t=s=>{var r,a;return((r=s.data)==null?void 0:r.type)===Ve&&((a=s.data)==null?void 0:a.responseTo)===n.requestId&&!!s.source&&n.sources.has(s.source)};return wt(window,"message").pipe(sn(t),St(n.sources.size),Zn(e))})},actions:{"send message":({context:n},e)=>{const{sources:t,targetOrigin:s}=n,{message:r}=e;t.forEach(a=>{a.postMessage(r,{targetOrigin:s})})},"on success":lt(({context:n})=>n.parentRef,({context:n,self:e})=>{var t;return n.response&&((t=n.resolvable)==null||t.resolve(n.response)),{type:"request.success",requestId:e.id,response:n.response,responseTo:n.responseTo}}),"on fail":lt(({context:n})=>n.parentRef,({context:n,self:e})=>{var t;return n.suppressWarnings||console.warn(`[@sanity/comlink] Received no response to message '${n.type}' on client '${n.from}' (ID: '${n.id}').`),(t=n.resolvable)==null||t.reject(new Error("No response received")),{type:"request.failed",requestId:e.id}}),"on abort":lt(({context:n})=>n.parentRef,({context:n,self:e})=>{var t;return(t=n.resolvable)==null||t.reject(new Error("Request aborted")),{type:"request.aborted",requestId:e.id}})},guards:{expectsResponse:({context:n})=>n.expectResponse},delays:{initialTimeout:0,responseTimeout:({context:n})=>n.responseTimeout??gs}}).createMachine({context:({input:n})=>({channelId:n.channelId,data:n.data,domain:n.domain,expectResponse:n.expectResponse??!1,from:n.from,id:`msg-${We()}`,parentRef:n.parentRef,resolvable:n.resolvable,response:null,responseTimeout:n.responseTimeout,responseTo:n.responseTo,signal:n.signal,sources:n.sources instanceof Set?n.sources:new Set([n.sources]),suppressWarnings:n.suppressWarnings,targetOrigin:n.targetOrigin,to:n.to,type:n.type}),initial:"idle",on:{abort:".aborted"},states:{idle:{after:{initialTimeout:[{target:"sending"}]}},sending:{entry:{type:"send message",params:({context:n})=>{const{channelId:e,data:t,domain:s,from:r,id:a,responseTo:o,to:i,type:l}=n;return{message:{channelId:e,data:t,domain:s,from:r,id:a,to:i,type:l,responseTo:o}}}},always:[{guard:"expectsResponse",target:"awaiting"},"success"]},awaiting:{invoke:{id:"listen for response",src:"listen",input:({context:n})=>({requestId:n.id,sources:n.sources,signal:n.signal}),onError:"aborted"},after:{responseTimeout:"failed"},on:{message:{actions:yt({response:({event:n})=>n.data.data,responseTo:({event:n})=>n.data.responseTo}),target:"success"}}},failed:{type:"final",entry:"on fail"},success:{type:"final",entry:"on success"},aborted:{type:"final",entry:"on abort"}},output:({context:n,self:e})=>({requestId:e.id,response:n.response,responseTo:n.responseTo})}),bs=er(({sendBack:n,input:e})=>{const t=()=>{n(e.event)};e.immediate&&t();const s=setInterval(t,e.interval);return()=>{clearInterval(s)}}),rt=()=>nn({actors:{requestMachine:jn(),listen:_n(),sendBackAtInterval:bs},actions:{"buffer message":Qe(({enqueue:n})=>{n.assign({buffer:({event:e,context:t})=>(Ie(e,"post"),[...t.buffer,e.data])}),n.emit(({event:e})=>(Ie(e,"post"),{type:"buffer.added",message:e.data}))}),"create request":yt({requests:({context:n,event:e,self:t,spawn:s})=>{Ie(e,"request");const r=(Array.isArray(e.data)?e.data:[e.data]).map(a=>{const o=`req-${We()}`;return s("requestMachine",{id:o,input:{channelId:n.channelId,data:a.data,domain:n.domain,expectResponse:a.expectResponse,from:n.name,parentRef:t,responseTo:a.responseTo,sources:n.target,targetOrigin:n.targetOrigin,to:n.connectTo,type:a.type}})});return[...n.requests,...r]}}),"emit received message":Qe(({enqueue:n})=>{n.emit(({event:e})=>(Ie(e,"message.received"),{type:"message",message:e.message.data}))}),"emit status":Kn((n,e)=>({type:"status",status:e.status})),"post message":De(({event:n})=>(Ie(n,"post"),{type:"request",data:{data:n.data.data,expectResponse:!0,type:n.data.type}})),"remove request":Qe(({context:n,enqueue:e,event:t})=>{Ie(t,["request.success","request.failed","request.aborted"]),Yn(t.requestId),e.assign({requests:n.requests.filter(({id:s})=>s!==t.requestId)})}),respond:De(({event:n})=>(Ie(n,"response"),{type:"request",data:{data:n.data,type:Ve,responseTo:n.respondTo}})),"send handshake ack":De({type:"request",data:{type:Ut}}),"send disconnect":De(()=>({type:"request",data:{type:Lt}})),"send handshake syn":De({type:"request",data:{type:zt}}),"send pending messages":Qe(({enqueue:n})=>{n.raise(({context:e})=>({type:"request",data:e.buffer.map(({data:t,type:s})=>({data:t,type:s}))})),n.emit(({context:e})=>({type:"buffer.flushed",messages:e.buffer})),n.assign({buffer:[]})}),"set target":yt({target:({event:n})=>(Ie(n,"target.set"),n.target)})},guards:{"has target":({context:n})=>!!n.target,"should send heartbeats":({context:n})=>n.heartbeat}}).createMachine({id:"connection",context:({input:n})=>({id:n.id||`${n.name}-${We()}`,buffer:[],channelId:`chn-${We()}`,connectTo:n.connectTo,domain:n.domain??Ot,heartbeat:n.heartbeat??!1,name:n.name,requests:[],target:n.target,targetOrigin:n.targetOrigin}),on:{"target.set":{actions:"set target"},"request.success":{actions:"remove request"},"request.failed":{actions:"remove request"}},initial:"idle",states:{idle:{entry:[{type:"emit status",params:{status:"idle"}}],on:{connect:{target:"handshaking",guard:"has target"},post:{actions:"buffer message"}}},handshaking:{id:"handshaking",entry:[{type:"emit status",params:{status:"handshaking"}}],invoke:[{id:"send syn",src:"sendBackAtInterval",input:()=>({event:{type:"syn"},interval:vs,immediate:!0})},{id:"listen for handshake",src:"listen",input:n=>Ht({include:Wt,count:1})(n)}],on:{syn:{actions:"send handshake syn"},request:{actions:"create request"},post:{actions:"buffer message"},"message.received":{target:"connected"},disconnect:{target:"disconnected"}},exit:"send handshake ack"},connected:{entry:["send pending messages",{type:"emit status",params:{status:"connected"}}],invoke:{id:"listen for messages",src:"listen",input:Ht({exclude:[Ve,nt]})},on:{post:{actions:"post message"},request:{actions:"create request"},response:{actions:"respond"},"message.received":{actions:"emit received message"},disconnect:{target:"disconnected"}},initial:"heartbeat",states:{heartbeat:{initial:"checking",states:{checking:{always:{guard:"should send heartbeats",target:"sending"}},sending:{on:{"request.failed":{target:"#handshaking"}},invoke:{id:"send heartbeat",src:"sendBackAtInterval",input:()=>({event:{type:"post",data:{type:nt,data:void 0}},interval:2e3,immediate:!1})}}}}}},disconnected:{id:"disconnected",entry:["send disconnect",{type:"emit status",params:{status:"disconnected"}}],on:{request:{actions:"create request"},post:{actions:"buffer message"},connect:{target:"handshaking",guard:"has target"}}}}}),pt=(n,e=rt())=>{const t=n.id||`${n.name}-${We()}`,s=Gn(e,{input:{...n,id:t}}),r=new Map,a=new Map,o=(g,b,v)=>{const f=r.get(g)||new Set;r.has(g)||r.set(g,f),f.add(b);const w=a.get(g);if(w){const P=(v==null?void 0:v.replay)??1;Array.from(w).slice(-P).forEach(async({data:x,id:j})=>{const C=await b(x);C&&s.send({type:"response",respondTo:j,data:C})}),a.delete(g)}return()=>{f.delete(b)}},i=()=>{s.send({type:"connect"})},l=()=>{s.send({type:"disconnect"})},c=(g,b)=>{const{unsubscribe:v}=s.on("status",f=>{b&&f.status!==b||g(f.status)});return v},p=g=>{s.send({type:"target.set",target:g})},d=(g,b)=>{const v={type:g,data:b};s.send({type:"post",data:v})};s.on("message",async({message:g})=>{const b=r.get(g.type);if(b){b.forEach(async f=>{const w=await f(g.data);w&&s.send({type:"response",respondTo:g.id,data:w})});return}const v=a.get(g.type);v?v.add(g):a.set(g.type,new Set([g]))});const h=()=>{s.stop()},m=()=>(s.start(),h);return{actor:s,connect:i,disconnect:l,id:t,name:n.name,machine:e,on:o,onStatus:c,post:d,setTarget:p,start:m,stop:h,get target(){return s.getSnapshot().context.target}}},mt=n=>{n.disconnect(),setTimeout(()=>{n.stop()},0)},ws=()=>{},xs=n=>{const{targetOrigin:e}=n,t=new Set,s=new Set;return{addTarget:r=>{if(t.has(r))return ws;if(!t.size||!s.size)return t.add(r),s.forEach(o=>{o.connections.forEach(i=>{i.setTarget(r),i.connect()})}),()=>{t.delete(r),s.forEach(o=>{o.connections.forEach(i=>{i.target===r&&i.disconnect()})})};t.add(r);const a=new Set;return s.forEach(o=>{const i=pt({...o.input,target:r,targetOrigin:e},o.machine);a.add(i),o.connections.add(i),o.subscribers.forEach(({type:l,handler:c,unsubscribers:p})=>{p.push(i.on(l,c))}),o.internalEventSubscribers.forEach(({type:l,handler:c,unsubscribers:p})=>{p.push(i.actor.on(l,c).unsubscribe)}),o.statusSubscribers.forEach(({handler:l,unsubscribers:c})=>{c.push(i.onStatus(p=>l({connection:i.id,status:p})))}),i.start(),i.connect()}),()=>{t.delete(r),a.forEach(o=>{mt(o),s.forEach(i=>{i.connections.delete(o)})})}},createChannel:(r,a=rt())=>{const o={connections:new Set,input:r,internalEventSubscribers:new Set,machine:a,statusSubscribers:new Set,subscribers:new Set};s.add(o);const{connections:i,internalEventSubscribers:l,statusSubscribers:c,subscribers:p}=o;if(t.size)t.forEach(v=>{const f=pt({...r,target:v,targetOrigin:e},a);i.add(f)});else{const v=pt({...r,targetOrigin:e},a);i.add(v)}const d=(...v)=>{const[f,w]=v;i.forEach(P=>{P.post(f,w)})},h=(v,f)=>{const w=[];i.forEach(x=>{w.push(x.on(v,f))});const P={type:v,handler:f,unsubscribers:w};return p.add(P),()=>{w.forEach(x=>x()),p.delete(P)}},m=(v,f)=>{const w=[];i.forEach(x=>{w.push(x.actor.on(v,f).unsubscribe)});const P={type:v,handler:f,unsubscribers:w};return l.add(P),()=>{w.forEach(x=>x()),l.delete(P)}},g=v=>{const f=[];i.forEach(P=>{f.push(P.onStatus(x=>v({connection:P.id,status:x})))});const w={handler:v,unsubscribers:f};return c.add(w),()=>{f.forEach(P=>P()),c.delete(w)}},b=()=>{const v=o.connections;v.forEach(mt),v.clear(),s.delete(o)};return{on:h,onInternalEvent:m,onStatus:g,post:d,start:()=>(i.forEach(v=>{v.start(),v.connect()}),b),stop:b}},destroy:()=>{s.forEach(({connections:r})=>{r.forEach(mt),r.clear()}),s.clear(),t.clear()}}},Ps={"handshake/syn":zt,"handshake/syn-ack":Wt,"handshake/ack":Ut,"channel/response":Ve,"channel/heartbeat":nt,"channel/disconnect":Lt,"overlay/focus":"visual-editing/focus","overlay/navigate":"visual-editing/navigate","overlay/toggle":"visual-editing/toggle","presentation/toggleOverlay":"presentation/toggle-overlay"},Ss={[zt]:"handshake/syn",[Wt]:"handshake/syn-ack",[Ut]:"handshake/ack",[Ve]:"channel/response",[nt]:"channel/heartbeat",[Lt]:"channel/disconnect","visual-editing/focus":"overlay/focus","visual-editing/navigate":"overlay/navigate","visual-editing/toggle":"overlay/toggle","presentation/toggle-overlay":"presentation/toggleOverlay"},_s=n=>{const{data:e}=n;return e&&typeof e=="object"&&"domain"in e&&"type"in e&&"from"in e&&"to"in e&&(e.domain==="sanity/channels"&&(e.domain=Ot),e.to==="overlays"&&(e.to="visual-editing"),e.from==="overlays"&&(e.from="visual-editing"),e.channelId=e.connectionId,delete e.connectionId,e.type=Ps[e.type]??e.type),n},js=n=>{const{channelId:e,...t}=n,s={...t,connectionId:e};return s.domain===Ot&&(s.domain="sanity/channels"),s.to==="visual-editing"&&(s.to="overlays"),s.from==="visual-editing"&&(s.from="overlays"),s.type=Ss[s.type]??s.type,s.type==="channel/response"&&s.responseTo&&!s.data&&(s.data={responseTo:s.responseTo}),(s.type==="handshake/syn"||s.type==="handshake/syn-ack"||s.type==="handshake/ack")&&(s.data={id:s.connectionId}),s},Es=({context:n},e)=>{const{sources:t,targetOrigin:s}=n,r=js(e.message);t.forEach(a=>{a.postMessage(r,{targetOrigin:s})})},Kt=()=>({listen:_n(_s),requestMachine:jn().provide({actions:{"send message":Es}})});function Rs(n){const e=new URL(n),{searchParams:t}=e;return t.delete(_t),t.delete(jt),t.delete(Ue),t.delete(Ne),t.delete(Et),e}function Cs(n,e,t,s){const r=new URL(n),{searchParams:a}=r;return e&&(a.set(jt,e),a.set(_t,t)),a.set(Ue,s),r}function En(){if(typeof crypto<"u"){const n=new Uint8Array(16);crypto.getRandomValues(n);let e="";for(let t=0;t<n.length;t++)e+=n[t].toString(16).padStart(2,"0");return e=btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]+$/,""),e}return Math.random().toString(36).slice(2)}async function Ts(n,e,t,s){const r=n.withConfig({apiVersion:Rt}),a=En(),o=r.patch($e).set({secret:a,studioUrl:t,userId:s});return await r.transaction().createIfNotExists({_id:$e,_type:qe,source:e,studioUrl:t,userId:s}).patch(o).commit({tag:Ct}),{secret:a}}async function Is(n,e,t,s){const r=n.withConfig({apiVersion:Rt}),a=r.patch($e).set({secret:null,studioUrl:t,userId:s});await r.transaction().createIfNotExists({_id:$e,_type:qe,source:e,studioUrl:t,userId:s}).patch(a).commit({tag:Ct})}function ks(n){for(var e=[],t=0;t<n.length;){var s=n[t];if(s==="*"||s==="+"||s==="?"){e.push({type:"MODIFIER",index:t,value:n[t++]});continue}if(s==="\\"){e.push({type:"ESCAPED_CHAR",index:t++,value:n[t++]});continue}if(s==="{"){e.push({type:"OPEN",index:t,value:n[t++]});continue}if(s==="}"){e.push({type:"CLOSE",index:t,value:n[t++]});continue}if(s===":"){for(var r="",a=t+1;a<n.length;){var o=n.charCodeAt(a);if(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||o===95){r+=n[a++];continue}break}if(!r)throw new TypeError("Missing parameter name at ".concat(t));e.push({type:"NAME",index:t,value:r}),t=a;continue}if(s==="("){var i=1,l="",a=t+1;if(n[a]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(a));for(;a<n.length;){if(n[a]==="\\"){l+=n[a++]+n[a++];continue}if(n[a]===")"){if(i--,i===0){a++;break}}else if(n[a]==="("&&(i++,n[a+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(a));l+=n[a++]}if(i)throw new TypeError("Unbalanced pattern at ".concat(t));if(!l)throw new TypeError("Missing pattern at ".concat(t));e.push({type:"PATTERN",index:t,value:l}),t=a;continue}e.push({type:"CHAR",index:t,value:n[t++]})}return e.push({type:"END",index:t,value:""}),e}function As(n,e){e===void 0&&(e={});for(var t=ks(n),s=e.prefixes,r=s===void 0?"./":s,a=e.delimiter,o=a===void 0?"/#?":a,i=[],l=0,c=0,p="",d=function(S){if(c<t.length&&t[c].type===S)return t[c++].value},h=function(S){var E=d(S);if(E!==void 0)return E;var T=t[c],M=T.type,k=T.index;throw new TypeError("Unexpected ".concat(M," at ").concat(k,", expected ").concat(S))},m=function(){for(var S="",E;E=d("CHAR")||d("ESCAPED_CHAR");)S+=E;return S},g=function(S){for(var E=0,T=o;E<T.length;E++){var M=T[E];if(S.indexOf(M)>-1)return!0}return!1},b=function(S){var E=i[i.length-1],T=S||(E&&typeof E=="string"?E:"");if(E&&!T)throw new TypeError('Must have text between two parameters, missing text after "'.concat(E.name,'"'));return!T||g(T)?"[^".concat(ke(o),"]+?"):"(?:(?!".concat(ke(T),")[^").concat(ke(o),"])+?")};c<t.length;){var v=d("CHAR"),f=d("NAME"),w=d("PATTERN");if(f||w){var P=v||"";r.indexOf(P)===-1&&(p+=P,P=""),p&&(i.push(p),p=""),i.push({name:f||l++,prefix:P,suffix:"",pattern:w||b(P),modifier:d("MODIFIER")||""});continue}var x=v||d("ESCAPED_CHAR");if(x){p+=x;continue}p&&(i.push(p),p="");var j=d("OPEN");if(j){var P=m(),C=d("NAME")||"",_=d("PATTERN")||"",R=m();h("CLOSE"),i.push({name:C||(_?l++:""),pattern:C&&!_?b(P):_,prefix:P,suffix:R,modifier:d("MODIFIER")||""});continue}h("END")}return i}function Ms(n,e){var t=[],s=Cn(n,t,e);return $s(s,t,e)}function $s(n,e,t){t===void 0&&(t={});var s=t.decode,r=s===void 0?function(a){return a}:s;return function(a){var o=n.exec(a);if(!o)return!1;for(var i=o[0],l=o.index,c=Object.create(null),p=function(h){if(o[h]===void 0)return"continue";var m=e[h-1];m.modifier==="*"||m.modifier==="+"?c[m.name]=o[h].split(m.prefix+m.suffix).map(function(g){return r(g,m)}):c[m.name]=r(o[h],m)},d=1;d<o.length;d++)p(d);return{path:i,index:l,params:c}}}function ke(n){return n.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Rn(n){return n&&n.sensitive?"":"i"}function Os(n,e){if(!e)return n;for(var t=/\((?:\?<(.*?)>)?(?!\?)/g,s=0,r=t.exec(n.source);r;)e.push({name:r[1]||s++,prefix:"",suffix:"",modifier:"",pattern:""}),r=t.exec(n.source);return n}function Ls(n,e,t){var s=n.map(function(r){return Cn(r,e,t).source});return new RegExp("(?:".concat(s.join("|"),")"),Rn(t))}function zs(n,e,t){return Ws(As(n,t),e,t)}function Ws(n,e,t){t===void 0&&(t={});for(var s=t.strict,r=s===void 0?!1:s,a=t.start,o=a===void 0?!0:a,i=t.end,l=i===void 0?!0:i,c=t.encode,p=c===void 0?function(E){return E}:c,d=t.delimiter,h=d===void 0?"/#?":d,m=t.endsWith,g=m===void 0?"":m,b="[".concat(ke(g),"]|$"),v="[".concat(ke(h),"]"),f=o?"^":"",w=0,P=n;w<P.length;w++){var x=P[w];if(typeof x=="string")f+=ke(p(x));else{var j=ke(p(x.prefix)),C=ke(p(x.suffix));if(x.pattern)if(e&&e.push(x),j||C)if(x.modifier==="+"||x.modifier==="*"){var _=x.modifier==="*"?"?":"";f+="(?:".concat(j,"((?:").concat(x.pattern,")(?:").concat(C).concat(j,"(?:").concat(x.pattern,"))*)").concat(C,")").concat(_)}else f+="(?:".concat(j,"(").concat(x.pattern,")").concat(C,")").concat(x.modifier);else{if(x.modifier==="+"||x.modifier==="*")throw new TypeError('Can not repeat "'.concat(x.name,'" without a prefix and suffix'));f+="(".concat(x.pattern,")").concat(x.modifier)}else f+="(?:".concat(j).concat(C,")").concat(x.modifier)}}if(l)r||(f+="".concat(v,"?")),f+=t.endsWith?"(?=".concat(b,")"):"$";else{var R=n[n.length-1],S=typeof R=="string"?v.indexOf(R[R.length-1])>-1:R===void 0;r||(f+="(?:".concat(v,"(?=").concat(b,"))?")),S||(f+="(?=".concat(v,"|").concat(b,")"))}return new RegExp(f,Rn(t))}function Cn(n,e,t){return n instanceof RegExp?Os(n,e):Array.isArray(n)?Ls(n,e,t):zs(n,e,t)}async function Us(n,e,t,s,r=an()){const a=n.withConfig({apiVersion:Rt});try{const o=new Date(Date.now()+1e3*tr),i=`drafts.${r}`,l=En(),c=a.patch(i).set({secret:l,source:e,studioUrl:t,userId:s});return await a.transaction().createOrReplace({_id:i,_type:on}).patch(c).commit({tag:Ct}),{secret:l,expiresAt:o}}finally{try{await a.delete({query:nr})}catch(o){console.error("Failed to delete expired secrets",o)}}}function Ds(n){const{draftMode:e,previewMode:t,origin:s=typeof location>"u"?"https://localhost":location.origin}=n,r=(t==null?void 0:t.enable)||(e==null?void 0:e.enable);let{preview:a="/"}=n;const o=new URL(a,s),i=r?new URL(r,s):void 0;return async l=>{try{if(l.previewSearchParam){const p=new URL(l.previewSearchParam,o);p.origin===o.origin&&(a=`${p.pathname}${p.search}`)}}catch{}typeof location<"u"&&location.origin===o.origin&&l.studioBasePath&&(a.startsWith(`${l.studioBasePath}/`)||a===l.studioBasePath)&&(a=n.preview||"/");const c=new URL(a,o);if(i){const p=new URL(i),{searchParams:d}=p;return d.set(jt,l.previewUrlSecret),d.set(Ue,l.studioPreviewPerspective),c.pathname!==p.pathname&&d.set(_t,`${c.pathname}${c.search}`),p.toString()}return c.toString()}}const Ns=n=>typeof n=="object"&&typeof n.then=="function",Ye=[];function qs(n,e,t=(s,r)=>s===r){if(n===e)return!0;if(!n||!e)return!1;const s=n.length;if(e.length!==s)return!1;for(let r=0;r<s;r++)if(!t(n[r],e[r]))return!1;return!0}function Fs(n,e=null,t=!1,s={}){e===null&&(e=[n]);for(const a of Ye)if(qs(e,a.keys,a.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return s.lifespan&&s.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,s.lifespan)),a.response;if(!t)throw a.promise}const r={keys:e,equal:s.equal,remove:()=>{const a=Ye.indexOf(r);a!==-1&&Ye.splice(a,1)},promise:(Ns(n)?n:n(...e)).then(a=>{r.response=a,s.lifespan&&s.lifespan>0&&(r.timeout=setTimeout(r.remove,s.lifespan))}).catch(a=>r.error=a)};if(Ye.push(r),!t)throw r.promise}const Tn=(n,e,t)=>Fs(n,e,!1,t);function Vs(n,e){let t=new AbortController,s=[];async function r(o,i){const{result:l,syncTags:c}=await n.fetch(rr,{},{filterResponse:!1,lastLiveEventId:o,tag:"preview-url-secret.fetch-vercel-bypass-protection-secret"});Array.isArray(c)&&(s=c),i.aborted||e(l)}const a=n.live.events().subscribe({next:o=>{o.type==="message"&&(t.abort(),t=new AbortController,o.tags.some(i=>s.includes(i))&&r(o.id,t.signal))},error:o=>console.error(o)});return r(null,t.signal),()=>{a.unsubscribe(),t.abort()}}const Bs=n=>{const e=L.c(3),{comlink:t}=n;let s,r;return e[0]!==t?(s=()=>t.on("visual-editing/features",Ks),r=[t],e[0]=t,e[1]=s,e[2]=r):(s=e[1],r=e[2]),y.useEffect(s,r),null};var Hs=y.memo(Bs);function Ks(){return{features:{optimistic:!0}}}function In(n,e){let t;return(...s)=>{clearTimeout(t),t=setTimeout(()=>{n.apply(n,s)},e)}}const Gs=function(n){const e=L.c(14),{comlink:t,children:s}=n;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={},e[0]=r):r=e[0];const a=y.useRef(r);let o,i;e[1]!==t?(o=()=>t==null?void 0:t.on("visual-editing/shared-state",()=>({state:a.current})),i=[t],e[1]=t,e[2]=o,e[3]=i):(o=e[2],i=e[3]),y.useEffect(o,i);let l;e[4]!==t?(l=(v,f)=>{a.current[v]=f,t==null||t.post("presentation/shared-state",{key:v,value:f})},e[4]=t,e[5]=l):l=e[5];const c=l;let p;e[6]!==t?(p=v=>{t==null||t.post("presentation/shared-state",{key:v}),delete a.current[v]},e[6]=t,e[7]=p):p=e[7];const d=p;let h,m;e[8]!==d||e[9]!==c?(m={removeValue:d,setValue:c},e[8]=d,e[9]=c,e[10]=m):m=e[10],h=m;const g=h;let b;return e[11]!==s||e[12]!==g?(b=u.jsx(br.Provider,{value:g,children:s}),e[11]=s,e[12]=g,e[13]=b):b=e[13],b},Xs=pe.div`
  overflow: hidden;
  flex-basis: 0;
  flex-shrink: 1;
`,Dt=function(n){const e=L.c(15),{children:t,defaultSize:s,id:r,minWidth:a,maxWidth:o,order:i}=n,l=s===void 0?null:s,c=i===void 0?0:i,p=y.useContext(kt);if(p===null)throw Error("Panel components must be rendered within a PanelGroup container");const{getPanelStyle:d,registerElement:h,unregisterElement:m}=p;let g;e[0]!==d||e[1]!==r?(g=d(r),e[0]=d,e[1]=r,e[2]=g):g=e[2];const b=g;let v,f;e[3]!==l||e[4]!==r||e[5]!==o||e[6]!==a||e[7]!==c||e[8]!==h||e[9]!==m?(v=()=>(h(r,{id:r,type:"panel",defaultSize:l,maxWidth:o??null,minWidth:a??0,order:c}),()=>{m(r)}),f=[r,l,c,o,a,h,m],e[3]=l,e[4]=r,e[5]=o,e[6]=a,e[7]=c,e[8]=h,e[9]=m,e[10]=v,e[11]=f):(v=e[10],f=e[11]),y.useLayoutEffect(v,f);let w;return e[12]!==t||e[13]!==b?(w=u.jsx(Xs,{style:b,children:t}),e[12]=t,e[13]=b,e[14]=w):w=e[14],w},kn="presentation/panels",An=()=>JSON.parse(localStorage.getItem(kn)||"{}"),Qs=n=>{localStorage.setItem(kn,JSON.stringify(n))},Mn=n=>n.map(e=>[e.id,e.order].join(":")).join(",");function Ys(){const n=L.c(1);let e;const t=Zs,s=Js;let r;if(n[0]===Symbol.for("react.memo_cache_sentinel")){const a=In(s,100);r={get:t,set:s,setDebounced:a},n[0]=r}else r=n[0];return e=r,e}function Js(n,e){const t=An(),s=Mn(n),r={...t,[s]:e};Qs(r)}function Zs(n){const e=An(),t=Mn(n);return Array.isArray(e[t])&&e[t].some(ea)?void 0:e[t]}function ea(n){return n===null}function xt(n,e,t){const{maxWidth:s,minWidth:r}=n,a=s==null?100:s/t*100,o=r/t*100;return Math.min(a,Math.max(o,e))}function ta(n,e,t,s,r,a){const{panels:o,widths:i}=r,{widths:l}=a,c=l||i,p=[...c];{const g=n<0?s:t,b=o.findIndex(w=>w.id===g.id),v=c[b],f=xt(g,v+Math.abs(n),e);if(v===f)return c;n=n<0?v-f:f-v}let d=0,h=n<0?t:s,m=o.findIndex(g=>g.id===h.id);for(;;){const g=o[m],b=c[m],v=Math.abs(n)-Math.abs(d),f=xt(g,b-v,e);if(b!==f&&(d+=b-f,p[m]=f,d.toPrecision(10).localeCompare(Math.abs(n).toPrecision(10),void 0,{numeric:!0})>=0))break;if(n<0){if(--m<0)break}else if(++m>=o.length)break}return d===0?c:(h=n<0?s:t,m=o.findIndex(g=>g.id===h.id),p[m]=c[m]+d,p)}function na(n,e,t){if(n.length===1)return"100";const s=n.findIndex(a=>a.id===e),r=t[s];return r==null?"0":r.toPrecision(10)}function Gt(n,e,t=0,s=null){const r=n.clientX,a=(s||e.getBoundingClientRect()).left;return r-a-t}function ht(n){return n.type==="panel"}function Xt(n){return n.type==="resizer"}function Qt(n){return Array.from(n.values()).sort(({order:e},{order:t})=>e==null&&t==null?0:e==null?-1:t==null?1:e-t)}function Yt(n,e,t){const s=e.reduce((o,i)=>o+i,0),r=[...e].map(o=>o/s*100);let a=0;for(let o=0;o<n.length;o++){const i=n[o],l=r[o],c=xt(i,l,t);l!=c&&(a+=l-c,r[o]=c)}if(a.toFixed(3)!=="0.000")for(let o=0;o<n.length;o++){const i=n[o];let{maxWidth:l,minWidth:c}=i;c=c/t*100,l!=null&&(l=l/t*100);const p=Math.min(l??100,Math.max(c,r[o]+a));if(p!==r[o]&&(a-=p-r[o],r[o]=p,Math.abs(a).toFixed(3)==="0.000"))break}return r}function ra(n){let e=n.length,t=100;const s=n.map(a=>a.defaultSize?(t-=a.defaultSize,e-=1,a.defaultSize):null),r=t/e;return s.map(a=>a===null?r:a)}const sa=pe.div`
  display: flex;
  flex-direction: row;
  height: 100%;
  overflow: hidden;
  width: 100%;
`,aa=function(n){const e=L.c(46),{children:t}=n,s=y.useRef(null);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=new Map,e[0]=r):r=e[0];const[a,o]=y.useState(r);let i,l;e[1]!==a?(l=Qt(a).filter(ht),e[1]=a,e[2]=l):l=e[2],i=l;const c=i;let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=[],e[3]=p):p=e[3];const[d,h]=y.useState(p),[m,g]=y.useState(null);let b;e[4]!==a||e[5]!==c||e[6]!==d?(b={elements:a,panels:c,widths:d},e[4]=a,e[5]=c,e[6]=d,e[7]=b):b=e[7];const v=y.useRef(b);let f;e[8]!==m||e[9]!==c||e[10]!==d?(f=B=>({flexGrow:na(c,B,d),pointerEvents:m===null?void 0:"none"}),e[8]=m,e[9]=c,e[10]=d,e[11]=f):f=e[11];const w=f;let P;e[12]===Symbol.for("react.memo_cache_sentinel")?(P=(B,F)=>{o(H=>{if(H.has(B))return H;const K=new Map(H);return K.set(B,F),K})},e[12]=P):P=e[12];const x=P;let j;e[13]===Symbol.for("react.memo_cache_sentinel")?(j=B=>{o(F=>{if(!F.has(B))return F;const H=new Map(F);return H.delete(B),H})},e[13]=j):j=e[13];const C=j;let _;e[14]===Symbol.for("react.memo_cache_sentinel")?(_={containerWidth:window.innerWidth,dragOffset:0,panelAfter:null,panelBefore:null,resizerIndex:-1,resizerRect:null,startX:0,widths:[]},e[14]=_):_=e[14];const R=y.useRef(_);let S;e[15]!==a?(S=(B,F)=>{const H=Qt(a),K=H.findIndex(ee=>ee.id===B),se=a.get(B);if(!se||!Xt(se))return;const G=se.el.current;G&&(R.current={resizerIndex:K,panelBefore:H.reduce((ee,J,ae)=>ht(J)&&ae<K?J:ee,null),panelAfter:H.reduce((ee,J,ae)=>ee===null&&ht(J)&&ae>K?J:ee,null),containerWidth:window.innerWidth,startX:F.pageX,dragOffset:Gt(F,G),resizerRect:G.getBoundingClientRect(),widths:v.current.widths},g(B))},e[15]=a,e[16]=S):S=e[16];const E=S;let T;e[17]===Symbol.for("react.memo_cache_sentinel")?(T=()=>{g(null)},e[17]=T):T=e[17];const M=T;let k;e[18]!==a?(k=(B,F)=>{F.preventDefault(),F.stopPropagation();const{containerWidth:H,dragOffset:K,panelBefore:se,panelAfter:G,resizerRect:ee}=R.current;if(se==null||G==null)return;const J=a.get(B);if(!J||!Xt(J))return;const ae=J.el.current;if(!ae)return;const oe=Gt(F,ae,K,ee);if(oe===0)return;const{widths:he}=v.current,fe=s.current.getBoundingClientRect(),_e=oe/fe.width*100,me=ta(_e,H,se,G,v.current,R.current);he.some((je,ge)=>je!==me[ge])&&h(me)},e[18]=a,e[19]=k):k=e[19];const I=k;let A,W;e[20]!==a||e[21]!==c||e[22]!==d?(A=()=>{v.current.elements=a,v.current.panels=c,v.current.widths=d},W=[a,c,d],e[20]=a,e[21]=c,e[22]=d,e[23]=A,e[24]=W):(A=e[23],W=e[24]),y.useLayoutEffect(A,W);const O=Ys();let U,q;e[25]!==c||e[26]!==O?(U=()=>{const{widths:B}=v.current;if(B.length===c.length)return;const F=O.get(c);if(F){const K=Yt(c,F,window.innerWidth);h(K);return}const H=ra(c);h(H)},q=[O,c],e[25]=c,e[26]=O,e[27]=U,e[28]=q):(U=e[27],q=e[28]),y.useLayoutEffect(U,q);let Q,V;e[29]!==c||e[30]!==O||e[31]!==d?(Q=()=>{d.length&&O.setDebounced(c,d)},V=[O,c,d],e[29]=c,e[30]=O,e[31]=d,e[32]=Q,e[33]=V):(Q=e[32],V=e[33]),y.useEffect(Q,V);let Y,re;e[34]===Symbol.for("react.memo_cache_sentinel")?(Y=()=>{const B=new ResizeObserver(()=>{const{panels:F,widths:H}=v.current,K=Yt(F,H,window.innerWidth);H.some((se,G)=>se!==K[G])&&h(K)});return B.observe(s.current),()=>{B.disconnect()}},re=[],e[34]=Y,e[35]=re):(Y=e[34],re=e[35]),y.useLayoutEffect(Y,re);let ie,z;e[36]!==m||e[37]!==I||e[38]!==w||e[39]!==E?(z={activeResizer:m,drag:I,getPanelStyle:w,registerElement:x,startDragging:E,stopDragging:M,unregisterElement:C},e[36]=m,e[37]=I,e[38]=w,e[39]=E,e[40]=z):z=e[40],ie=z;const Z=ie;let ce;e[41]!==t?(ce=u.jsx(sa,{ref:s,children:t}),e[41]=t,e[42]=ce):ce=e[42];let le;return e[43]!==Z||e[44]!==ce?(le=u.jsx(kt.Provider,{value:Z,children:ce}),e[43]=Z,e[44]=ce,e[45]=le):le=e[45],le};function Nt(n){const e=L.c(37);let t,s,r,a,o;e[0]!==n?({children:t,message:s,onRetry:a,onContinueAnyway:r,...o}=n,e[0]=n,e[1]=t,e[2]=s,e[3]=r,e[4]=a,e[5]=o):(t=e[1],s=e[2],r=e[3],a=e[4],o=e[5]);const{t:i}=ve(ye);let l;e[6]!==i?(l=i("error-card.retry-button.text"),e[6]=i,e[7]=l):l=e[7];let c;e[8]!==a||e[9]!==l?(c=u.jsx(Se,{mode:"ghost",onClick:a,text:l}),e[8]=a,e[9]=l,e[10]=c):c=e[10];const p=c;let d;e[11]!==i?(d=i("error-card.continue-button.text"),e[11]=i,e[12]=d):d=e[12];let h;e[13]!==r||e[14]!==d?(h=u.jsx(Se,{mode:"ghost",tone:"critical",onClick:r,text:d}),e[13]=r,e[14]=d,e[15]=h):h=e[15];const m=h;let g;e[16]!==i?(g=i("error-card.title"),e[16]=i,e[17]=g):g=e[17];let b;e[18]!==g?(b=u.jsx(X,{size:1,weight:"semibold",children:g}),e[18]=g,e[19]=b):b=e[19];let v;e[20]!==s?(v=u.jsx(X,{muted:!0,size:1,children:s}),e[20]=s,e[21]=v):v=e[21];let f;e[22]!==b||e[23]!==v?(f=u.jsxs(Oe,{space:3,children:[b,v]}),e[22]=b,e[23]=v,e[24]=f):f=e[24];let w;e[25]!==m||e[26]!==r||e[27]!==a||e[28]!==p?(w=a&&r?u.jsxs(Rr,{space:2,children:[p,m]}):a?u.jsx(de,{children:p}):r?u.jsx(de,{children:m}):null,e[25]=m,e[26]=r,e[27]=a,e[28]=p,e[29]=w):w=e[29];let P;e[30]!==t||e[31]!==f||e[32]!==w?(P=u.jsx(ne,{align:"center",height:"fill",justify:"center",children:u.jsx(Cr,{padding:4,sizing:"border",width:0,children:u.jsxs(Oe,{space:4,children:[f,t,w]})})}),e[30]=t,e[31]=f,e[32]=w,e[33]=P):P=e[33];let x;return e[34]!==o||e[35]!==P?(x=u.jsx(ue,{height:"fill",...o,children:P}),e[34]=o,e[35]=P,e[36]=x):x=e[36],x}function oa(n={}){const e=Object.entries(n).map(([t,s])=>`${t}=${s}`).join("&");return e.length?`?${e}`:""}function ia(n){const e=["comment","inspect","instruction","pathKey","rev","since","template","view"],t=Object.entries(n).filter(([s])=>e.includes(s)).reduce((s,[r,a])=>a==null?s:{...s,[r]:a},{});return oa(t)}const ca=y.forwardRef(function(n,e){const t=L.c(11);let s,r;t[0]!==n?({searchParams:r,...s}=n,t[0]=n,t[1]=s,t[2]=r):(s=t[1],r=t[2]);let a;t[3]!==r?(a=Object.entries(r),t[3]=r,t[4]=a):a=t[4];let o;t[5]!==a?(o={type:void 0,_searchParams:a},t[5]=a,t[6]=o):o=t[6];let i;return t[7]!==e||t[8]!==s||t[9]!==o?(i=u.jsx(ot,{...s,ref:e,state:o,title:void 0}),t[7]=e,t[8]=s,t[9]=o,t[10]=i):i=t[10],i}),la=y.forwardRef(function(n,e){const t=L.c(15);let s,r,a,o;if(t[0]!==n){const{documentId:p,documentType:d,parentRefPath:h,template:m,searchParams:g,...b}=n;s=p,r=d,o=g,a=b,t[0]=n,t[1]=s,t[2]=r,t[3]=a,t[4]=o}else s=t[1],r=t[2],a=t[3],o=t[4];let i;t[5]!==o?(i=Object.entries(o),t[5]=o,t[6]=i):i=t[6];let l;t[7]!==s||t[8]!==r||t[9]!==i?(l={id:s,type:r,_searchParams:i},t[7]=s,t[8]=r,t[9]=i,t[10]=l):l=t[10];let c;return t[11]!==e||t[12]!==a||t[13]!==l?(c=u.jsx(ot,{...a,ref:e,state:l,title:void 0}),t[11]=e,t[12]=a,t[13]=l,t[14]=c):c=t[14],c});function $n(n){const e=L.c(26),{children:t,onStructureParams:s,structureParams:r,searchParams:a,refs:o}=n,{state:i,resolvePathFromState:l}=Tt();let c;e[0]!==i._searchParams?(c=Object.fromEntries(i._searchParams||[]),e[0]=i._searchParams,e[1]=c):c=e[1];const p=un(c);let d;e[2]!==l||e[3]!==p||e[4]!==i?(d=R=>{const S=l(i),E=ia({...p,...R});return`${S}${E}`},e[2]=l,e[3]=p,e[4]=i,e[5]=d):d=e[5];const h=d;let m,g;e[6]===Symbol.for("react.memo_cache_sentinel")?(g={},e[6]=g):g=e[6];const b=r;let v;e[7]===Symbol.for("react.memo_cache_sentinel")?(v=[],e[7]=v):v=e[7];let f;e[8]!==o||e[9]!==a?(f=R=>{const{childId:S,...E}=R,T=o==null?void 0:o.find(M=>M._id===S||at(M._id)===S);return T?u.jsx(ot,{...E,state:{id:S,type:T._type,_searchParams:Object.entries(a)}}):u.jsx("div",{...E})},e[8]=o,e[9]=a,e[10]=f):f=e[10];let w,P;e[11]!==a?(w=R=>u.jsx(ca,{...R,searchParams:a}),P=R=>u.jsx(la,{...R,searchParams:a}),e[11]=a,e[12]=w,e[13]=P):(w=e[12],P=e[13]);let x;e[14]!==s?(x=R=>{s({...R,inspect:R.inspect??void 0})},e[14]=s,e[15]=x):x=e[15];let j;e[16]!==h||e[17]!==b||e[18]!==f||e[19]!==w||e[20]!==P||e[21]!==x?(j={index:0,groupIndex:0,siblingIndex:0,payload:g,params:b,hasGroupSiblings:!1,groupLength:1,routerPanesState:v,ChildLink:f,BackLink:w,ReferenceChildLink:P,ParameterizedLink:ya,closeCurrentAndAfter:va,handleEditReference:ga,replaceCurrent:fa,closeCurrent:ha,duplicateCurrent:ma,setView:pa,setParams:x,setPayload:da,navigateIntent:ua,createPathWithParams:h},e[16]=h,e[17]=b,e[18]=f,e[19]=w,e[20]=P,e[21]=x,e[22]=j):j=e[22],m=j;const C=m;let _;return e[23]!==t||e[24]!==C?(_=u.jsx(Qr.Provider,{value:C,children:t}),e[23]=t,e[24]=C,e[25]=_):_=e[25],_}function ua(n,e,t){console.warn("navigateIntent",n,e,t)}function da(n){console.warn("setPayload",n)}function pa(n){console.warn("setView",n)}function ma(n){console.warn("duplicateCurrent",n)}function ha(){console.warn("closeCurrent")}function fa(n){console.warn("replaceCurrent",n)}function ga(n){console.warn("handleEditReference",n)}function va(){console.warn("closeCurrentAndAfter")}function ya(){throw new Error("ParameterizedLink not implemented")}const ba=pe(Sn)`
  height: 100%;
`,wa=pe(ne)`
  & > div {
    min-width: none !important;
    max-width: none !important;
  }
`,xa=pe(tt)`
  white-space: pre-wrap;
`;function Pa(n){var S,E,T,M;const e=L.c(33),{mainDocumentState:t,onStructureParams:s,searchParams:r,refs:a}=n,{t:o}=ve(ye),{devMode:i}=At();let l,c;if(e[0]!==((S=t==null?void 0:t.document)==null?void 0:S._id)||e[1]!==a){let k;e[3]!==((E=t==null?void 0:t.document)==null?void 0:E._id)?(k=I=>{var A;return at(I._id)!==((A=t==null?void 0:t.document)==null?void 0:A._id)},e[3]=(T=t==null?void 0:t.document)==null?void 0:T._id,e[4]=k):k=e[4],c=a.filter(k).map(_a),e[0]=(M=t==null?void 0:t.document)==null?void 0:M._id,e[1]=a,e[2]=c}else c=e[2];l=c;const p=l;let d,h;e[5]!==p?(h={filter:"_id in $ids",params:{ids:p}},e[5]=p,e[6]=h):h=e[6];let m;e[7]!==o?(m=o("document-list-pane.document-list.title"),e[7]=o,e[8]=m):m=e[8];let g;e[9]!==h||e[10]!==m?(g={id:"$root",options:h,schemaTypeName:"",title:m,type:"documentList"},e[9]=h,e[10]=m,e[11]=g):g=e[11],d=g;const b=d,[v,f]=y.useState(null);let w;e[12]===Symbol.for("react.memo_cache_sentinel")?(w=()=>f(null),e[12]=w):w=e[12];const P=w,[x]=y.useState(Sa);let j;e[13]===Symbol.for("react.memo_cache_sentinel")?(j=()=>f(null),e[13]=j):j=e[13];let C;if(e[14]!==a?(C=[a],e[14]=a,e[15]=C):C=e[15],y.useEffect(j,C),v){let k;e[16]!==o?(k=o("document-list-pane.error.text"),e[16]=o,e[17]=k):k=e[17];let I;e[18]!==i||e[19]!==v||e[20]!==o?(I=i&&u.jsx(ue,{overflow:"auto",padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(et,{muted:!0,size:0,children:o("presentation-error.label")}),u.jsx(xa,{size:1,children:v.error.message})]})}),e[18]=i,e[19]=v,e[20]=o,e[21]=I):I=e[21];let A;return e[22]!==I||e[23]!==k?(A=u.jsx(Nt,{flex:1,message:k,onRetry:P,children:I}),e[22]=I,e[23]=k,e[24]=A):A=e[24],A}let _;e[25]!==b?(_=u.jsx(wa,{direction:"column",flex:1,children:u.jsx(rs,{index:0,itemId:"$root",pane:b,paneKey:"$root"})}),e[25]=b,e[26]=_):_=e[26];let R;return e[27]!==s||e[28]!==a||e[29]!==r||e[30]!==x||e[31]!==_?(R=u.jsx(Pn,{onCatch:f,children:u.jsx(ba,{children:u.jsx(xn,{children:u.jsx($n,{onStructureParams:s,structureParams:x,searchParams:r,refs:a,children:_})})})}),e[27]=s,e[28]=a,e[29]=r,e[30]=x,e[31]=_,e[32]=R):R=e[32],R}function Sa(){return{}}function _a(n){return at(n._id)}const ja=pe(tt)`
  white-space: pre-wrap;
`;function Ea(n){const e=L.c(35),{documentId:t,documentType:s,onFocusPath:r,onStructureParams:a,searchParams:o,structureParams:i}=n,{template:l,templateParams:c}=i,{t:p}=ve(ye),{devMode:d}=At();let h,m;e[0]!==c?(m=Xr(c),e[0]=c,e[1]=m):m=e[1];let g;e[2]!==t||e[3]!==s||e[4]!==m||e[5]!==l?(g={id:t,type:s,template:l,templateParameters:m},e[2]=t,e[3]=s,e[4]=m,e[5]=l,e[6]=g):g=e[6];let b;e[7]!==t||e[8]!==g?(b={id:t,options:g,title:"",type:"document"},e[7]=t,e[8]=g,e[9]=b):b=e[9],h=b;const v=h,[f,w]=y.useState(null);let P;e[10]===Symbol.for("react.memo_cache_sentinel")?(P=()=>w(null),e[10]=P):P=e[10];const x=P;let j;e[11]===Symbol.for("react.memo_cache_sentinel")?(j=()=>{w(null)},e[11]=j):j=e[11];let C;if(e[12]!==t||e[13]!==s||e[14]!==i?(C=[t,s,i],e[12]=t,e[13]=s,e[14]=i,e[15]=C):C=e[15],y.useEffect(j,C),f){let T;e[16]!==p?(T=p("document-pane.error.text"),e[16]=p,e[17]=T):T=e[17];let M;e[18]!==d||e[19]!==f||e[20]!==p?(M=d&&u.jsx(ue,{overflow:"auto",padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(et,{muted:!0,size:0,children:p("presentation-error.label")}),u.jsx(ja,{size:1,children:f.error.message})]})}),e[18]=d,e[19]=f,e[20]=p,e[21]=M):M=e[21];let k;return e[22]!==T||e[23]!==M?(k=u.jsx(Nt,{flex:1,message:T,onRetry:x,children:M}),e[22]=T,e[23]=M,e[24]=k):k=e[24],k}let _;e[25]===Symbol.for("react.memo_cache_sentinel")?(_={height:"100%"},e[25]=_):_=e[25];let R;e[26]===Symbol.for("react.memo_cache_sentinel")?(R=u.jsx(ln,{}),e[26]=R):R=e[26];let S;e[27]!==r||e[28]!==v?(S=u.jsx(y.Suspense,{fallback:R,children:u.jsx(Yr,{paneKey:"document",index:1,itemId:"document",pane:v,onFocusPath:r})}),e[27]=r,e[28]=v,e[29]=S):S=e[29];let E;return e[30]!==a||e[31]!==o||e[32]!==i||e[33]!==S?(E=u.jsx(Pn,{onCatch:w,children:u.jsx(Sn,{style:_,children:u.jsx($n,{searchParams:o,onStructureParams:a,structureParams:i,children:S})})}),e[30]=a,e[31]=o,e[32]=i,e[33]=S,e[34]=E):E=e[34],E}function Ra(n){const e=L.c(7),{documentId:t,documentType:s,onFocusPath:r,onStructureParams:a,searchParams:o,structureParams:i}=n;let l;return e[0]!==t||e[1]!==s||e[2]!==r||e[3]!==a||e[4]!==o||e[5]!==i?(l=u.jsx(xn,{children:u.jsx(Ea,{documentId:t,documentType:s,onFocusPath:r,onStructureParams:a,searchParams:o,structureParams:i})}),e[0]=t,e[1]=s,e[2]=r,e[3]=a,e[4]=o,e[5]=i,e[6]=l):l=e[6],l}function Ca(n,e){const t=L.c(7),s=Gr();let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={},t[0]=r):r=t[0];const[a,o]=y.useState(r),{perspectiveStack:i}=It();let l,c;return t[1]!==n||t[2]!==s||t[3]!==i||t[4]!==e?(l=()=>{if(!e)return;const p=Jr(s,e,n,i).subscribe(d=>{o(d)});return()=>{p==null||p.unsubscribe()}},c=[s,e,n,i],t[1]=n,t[2]=s,t[3]=i,t[4]=e,t[5]=l,t[6]=c):(l=t[5],c=t[6]),y.useEffect(l,c),a}function Ta(n){var _,R,S,E,T,M,k,I;const e=L.c(38),{documentId:t,documentType:s,mainDocumentState:r,onFocusPath:a,onStructureParams:o,refs:i,searchParams:l,structureParams:c}=n,{t:p}=ve(ye),d=Dr();let h;e[0]!==((_=r==null?void 0:r.document)==null?void 0:_._id)||e[1]!==((R=r==null?void 0:r.document)==null?void 0:R._type)||e[2]!==l?(h=A=>{var W,O;return u.jsx(ot,{...A,state:{id:(W=r==null?void 0:r.document)==null?void 0:W._id,type:(O=r==null?void 0:r.document)==null?void 0:O._type,_searchParams:Object.entries(l)}})},e[0]=(S=r==null?void 0:r.document)==null?void 0:S._id,e[1]=(E=r==null?void 0:r.document)==null?void 0:E._type,e[2]=l,e[3]=h):h=e[3];const m=h;let g,b;e[4]!==((T=r==null?void 0:r.document)==null?void 0:T._type)||e[5]!==d?(b=d.get(((M=r==null?void 0:r.document)==null?void 0:M._type)||"shoe"),e[4]=(k=r==null?void 0:r.document)==null?void 0:k._type,e[5]=d,e[6]=b):b=e[6],g=b;const v=g,f=Ca(((I=r==null?void 0:r.document)==null?void 0:I._id)||"",v);let w;e:{if(!(r!=null&&r.document)){w=null;break e}let A;e[7]!==r.document||e[8]!==f.snapshot?(A=Nr({snapshot:f.snapshot,fallback:r.document}),e[7]=r.document,e[8]=f.snapshot,e[9]=A):A=e[9];let W;e[10]!==p?(W=p("main-document.label"),e[10]=p,e[11]=W):W=e[11];let O;e[12]!==W?(O=u.jsx(ue,{padding:1,radius:2,shadow:1,children:u.jsx(X,{muted:!0,size:0,weight:"medium",children:W})}),e[12]=W,e[13]=O):O=e[13];let U;e[14]!==v||e[15]!==A||e[16]!==O?(U=u.jsx(qr,{...A,schemaType:v,status:O}),e[14]=v,e[15]=A,e[16]=O,e[17]=U):U=e[17],w=U}const P=w;if(t&&s){let A;return e[18]!==t||e[19]!==s||e[20]!==a||e[21]!==o||e[22]!==l||e[23]!==c?(A=u.jsx(Ra,{documentId:t,documentType:s,onFocusPath:a,onStructureParams:o,searchParams:l,structureParams:c}),e[18]=t,e[19]=s,e[20]=a,e[21]=o,e[22]=l,e[23]=c,e[24]=A):A=e[24],A}let x;e[25]!==m||e[26]!==r||e[27]!==P||e[28]!==p?(x=r&&u.jsx(ue,{padding:3,tone:r.document?"inherit":"caution",children:r.document?u.jsx(Fr,{__unstable_focusRing:!0,as:m,"data-as":"a",radius:2,sizing:"border",tone:"inherit",children:P}):u.jsx(ue,{padding:2,radius:2,tone:"inherit",children:u.jsxs(ne,{gap:3,children:[u.jsx(de,{flex:"none",children:u.jsx(X,{size:1,children:u.jsx(Vr,{})})}),u.jsx(de,{flex:1,children:u.jsx(X,{size:1,children:u.jsx(Br,{t:p,i18nKey:"main-document.missing.text",components:{Code:"code"},values:{path:r.path}})})})]})})}),e[25]=m,e[26]=r,e[27]=P,e[28]=p,e[29]=x):x=e[29];let j;e[30]!==r||e[31]!==o||e[32]!==i||e[33]!==l?(j=u.jsx(Pa,{mainDocumentState:r,onStructureParams:o,searchParams:l,refs:i}),e[30]=r,e[31]=o,e[32]=i,e[33]=l,e[34]=j):j=e[34];let C;return e[35]!==x||e[36]!==j?(C=u.jsxs(ne,{direction:"column",flex:1,height:"fill",children:[x,j]}),e[35]=x,e[36]=j,e[37]=C):C=e[37],C}function Ia(n){const e=L.c(2);let t;e[0]!==n?(t=()=>n||We(),e[0]=n,e[1]=t):t=e[1];const[s]=y.useState(t);return s}const ka=pe.div`
  position: relative;
`,Aa=pe.div`
  position: absolute;
  top: 0;
  bottom: 0;
  left: -5px;
  width: 9px;
  z-index: 10;
  cursor: ${({$disabled:n})=>n?"auto":"ew-resize"};

  /* Border */
  & > span:nth-child(1) {
    display: block;
    border-left: 1px solid var(--card-border-color);
    position: absolute;
    top: 0;
    left: 4px;
    bottom: 0;
    transition: opacity 200ms;
  }

  ${({$disabled:n})=>!n&&`
    /* Hover effect */
    & > span:nth-child(2) {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    @media (hover: hover) {
      &:hover > span:nth-child(2) {
        opacity: 0.2;
      }
    }
  `}
`,On=function(n){const e=L.c(27),{id:t,order:s,disabled:r}=n,a=r===void 0?!1:r,o=y.useRef(null),i=y.useContext(kt);if(i===null)throw Error("Panel components must be rendered within a PanelGroup container");const l=Ia(t),{activeResizer:c,drag:p,startDragging:d,stopDragging:h,registerElement:m,unregisterElement:g}=i,b=c===l;if(i===null)throw Error("Panel components must be rendered within a PanelGroup container");let v;e[0]!==l||e[1]!==d?(v=I=>{d(l,I.nativeEvent)},e[0]=l,e[1]=d,e[2]=v):v=e[2];const f=v;let w;e[3]!==p||e[4]!==l?(w=I=>{p(l,I)},e[3]=p,e[4]=l,e[5]=w):w=e[5];const P=w;let x;e[6]!==h?(x=()=>{o.current.blur(),h()},e[6]=h,e[7]=x):x=e[7];const j=x;let C,_;e[8]!==a||e[9]!==b||e[10]!==P||e[11]!==j?(C=()=>{if(!b||a)return;const I=function(){const A=document.body.style,W=document.documentElement.style,{cursor:O}=W,{userSelect:U}=A;return W.cursor="ew-resize",A.userSelect="none",()=>{O?W.cursor=O:W.removeProperty("cursor"),U?A.userSelect=U:A.removeProperty("user-select")}}();return window.addEventListener("mousemove",P),window.addEventListener("mouseup",j),window.addEventListener("contextmenu",j),()=>{I(),window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",j),window.removeEventListener("contextmenu",j)}},_=[a,b,P,j],e[8]=a,e[9]=b,e[10]=P,e[11]=j,e[12]=C,e[13]=_):(C=e[12],_=e[13]),y.useEffect(C,_);let R,S;e[14]!==l||e[15]!==s||e[16]!==m||e[17]!==g?(R=()=>(m(l,{id:l,order:s,type:"resizer",el:o}),()=>{g(l)}),S=[l,s,m,g],e[14]=l,e[15]=s,e[16]=m,e[17]=g,e[18]=R,e[19]=S):(R=e[18],S=e[19]),y.useLayoutEffect(R,S);let E,T;e[20]===Symbol.for("react.memo_cache_sentinel")?(T=u.jsx("span",{}),E=u.jsx("span",{}),e[20]=E,e[21]=T):(E=e[20],T=e[21]);let M;e[22]!==a?(M=u.jsxs(Aa,{$disabled:a,children:[T,E]}),e[22]=a,e[23]=M):M=e[23];let k;return e[24]!==f||e[25]!==M?(k=u.jsx(ka,{onMouseDown:f,ref:o,children:M}),e[24]=f,e[25]=M,e[26]=k):k=e[26],k},Ma=n=>{const e=L.c(8),{documentId:t,setDisplayedDocument:s,getCommentIntent:r}=n;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=u.jsx(On,{order:4}),e[0]=a):a=e[0];let o;e[1]!==r||e[2]!==n.children?(o=u.jsx(Sr,{getIntent:r,children:n.children}),e[1]=r,e[2]=n.children,e[3]=o):o=e[3];let i;return e[4]!==t||e[5]!==s||e[6]!==o?(i=u.jsxs(u.Fragment,{children:[a,u.jsx(Dt,{id:"content",minWidth:325,order:5,children:u.jsx(as,{documentId:t,setDisplayedDocument:s,children:o})})]}),e[4]=t,e[5]=s,e[6]=o,e[7]=i):i=e[7],i},$a=n=>{const e=L.c(14),{documentId:t,documentsOnPage:s,documentType:r,getCommentIntent:a,mainDocumentState:o,onFocusPath:i,onStructureParams:l,searchParams:c,setDisplayedDocument:p,structureParams:d}=n;let h;e[0]!==t||e[1]!==r||e[2]!==s||e[3]!==o||e[4]!==i||e[5]!==l||e[6]!==c||e[7]!==d?(h=u.jsx(Ta,{documentId:t,documentType:r,mainDocumentState:o,onFocusPath:i,onStructureParams:l,refs:s,searchParams:c,structureParams:d}),e[0]=t,e[1]=r,e[2]=s,e[3]=o,e[4]=i,e[5]=l,e[6]=c,e[7]=d,e[8]=h):h=e[8];let m;return e[9]!==t||e[10]!==a||e[11]!==p||e[12]!==h?(m=u.jsx(Ma,{documentId:t,getCommentIntent:a,setDisplayedDocument:p,children:h}),e[9]=t,e[10]=a,e[11]=p,e[12]=h,e[13]=m):m=e[13],m},Oa=function(n){const e=L.c(5),{children:t,navigate:s}=n;let r;e[0]!==s?(r=(i,l)=>{s((l===void 0?void 0:l)||{},i?{preview:i}:{})},e[0]=s,e[1]=r):r=e[1];const a=r;let o;return e[2]!==t||e[3]!==a?(o=u.jsx(vr.Provider,{value:a,children:t}),e[2]=t,e[3]=a,e[4]=o):o=e[4],o};function La(n,e){const t=L.c(9);let s;t[0]!==e||t[1]!==n?(s=()=>JSON.parse(localStorage.getItem(n)??JSON.stringify(e)),t[0]=e,t[1]=n,t[2]=s):s=t[2];const[r,a]=y.useState(s);let o,i;t[3]!==n||t[4]!==r?(o=()=>{localStorage.setItem(n,JSON.stringify(r))},i=[n,r],t[3]=n,t[4]=r,t[5]=o,t[6]=i):(o=t[5],i=t[6]),y.useEffect(o,i);let l;return t[7]!==r?(l=[r,a],t[7]=r,t[8]=l):l=t[8],l}function za(n){const e=L.c(11),{unstable_navigator:t}=n,s=!!(t!=null&&t.component),[r,a]=La("presentation/navigator",s),o=s?r:!1;let i;e:{if(!s){i=void 0;break e}let m;e[0]!==a?(m=()=>a(Wa),e[0]=a,e[1]=m):m=e[1],i=m}const l=i;let c;e[2]!==o||e[3]!==t?(c=function(){return u.jsx(u.Fragment,{children:o&&u.jsx(Da,{...t})})},e[2]=o,e[3]=t,e[4]=c):c=e[4];const p=c;let d;e[5]!==o||e[6]!==l?(d={navigatorEnabled:o,toggleNavigator:l},e[5]=o,e[6]=l,e[7]=d):d=e[7];let h;return e[8]!==p||e[9]!==d?(h=[d,p],e[8]=p,e[9]=d,e[10]=h):h=e[10],h}function Wa(n){return!n}function Ua(n){const e=L.c(11),{minWidth:t,maxWidth:s,component:r}=n,a=t!=null&&s!=null&&t===s;let o;e[0]!==r?(o=u.jsx(r,{}),e[0]=r,e[1]=o):o=e[1];let i;e[2]!==s||e[3]!==t||e[4]!==o?(i=u.jsx(Dt,{id:"navigator",minWidth:t,maxWidth:s,order:1,children:o}),e[2]=s,e[3]=t,e[4]=o,e[5]=i):i=e[5];let l;e[6]!==a?(l=u.jsx(On,{order:2,disabled:a}),e[6]=a,e[7]=l):l=e[7];let c;return e[8]!==i||e[9]!==l?(c=u.jsxs(u.Fragment,{children:[i,l]}),e[8]=i,e[9]=l,e[10]=c):c=e[10],c}const Da=y.memo(Ua),Na=function(n){const e=L.c(3),{children:t,params:s}=n;let r;r=s;const a=r;let o;return e[0]!==t||e[1]!==a?(o=u.jsx(yr.Provider,{value:a,children:t}),e[0]=t,e[1]=a,e[2]=o):o=e[2],o},qa=function(n){const e=L.c(10),{children:t,devMode:s,name:r,navigate:a,params:o,searchParams:i,structureParams:l}=n;let c,p;e[0]!==s||e[1]!==r||e[2]!==a||e[3]!==o||e[4]!==i||e[5]!==l?(p={devMode:s,name:r,navigate:a,params:o,searchParams:i,structureParams:l},e[0]=s,e[1]=r,e[2]=a,e[3]=o,e[4]=i,e[5]=l,e[6]=p):p=e[6],c=p;const d=c;let h;return e[7]!==t||e[8]!==d?(h=u.jsx(gr.Provider,{value:d,children:t}),e[7]=t,e[8]=d,e[9]=h):h=e[9],h};function it(n){return Array.isArray(n)?n.join(","):n}const Fa=Ke.create(pe.iframe`
  box-shadow: 0 0 0 1px var(--card-border-color);
  border: 0;
  max-height: 100%;
  width: 100%;
  view-transition-class: presentation-tool-iframe;
`),Va=pe(de)`
  position: absolute;
  inset: 0;
  background: transparent;
`,Ba=y.forwardRef(function(n,e){const t=L.c(16),{animate:s,initial:r,onLoad:a,preventClick:o,src:i,variants:l,style:c}=n,p=`presentation-tool-iframe-${y.useId().replace(/[^a-zA-Z0-9-_]/g,"_")}`;let d;t[0]!==c||t[1]!==p?(d={...c,viewTransitionName:p},t[0]=c,t[1]=p,t[2]=d):d=t[2];let h;t[3]!==s||t[4]!==r||t[5]!==a||t[6]!==e||t[7]!==i||t[8]!==d||t[9]!==l?(h=u.jsx(Fa,{style:d,animate:s,initial:r,onLoad:a,ref:e,src:i,variants:l}),t[3]=s,t[4]=r,t[5]=a,t[6]=e,t[7]=i,t[8]=d,t[9]=l,t[10]=h):h=t[10];let m;t[11]!==o?(m=o&&u.jsx(Va,{}),t[11]=o,t[12]=m):m=t[12];let g;return t[13]!==h||t[14]!==m?(g=u.jsxs(u.Fragment,{children:[h,m]}),t[13]=h,t[14]=m,t[15]=g):g=t[15],g});function Ha(n){const e=L.c(16),{openPopup:t,previewLocationOrigin:s,previewLocationRoute:r,perspective:a,targetOrigin:o}=n;let i;const l=new URL(r,s||o);l.searchParams.set(Ue,it(a));const{pathname:c,search:p}=l;i=`${s}${c}${p}`;const d=i,{t:h}=ve(ye);let m;e[0]!==t?(m=j=>{j.preventDefault(),t(j.currentTarget.href)},e[0]=t,e[1]=m):m=e[1];const g=m;let b;e[2]!==h?(b=h("share-url.menu-item.open.text"),e[2]=h,e[3]=b):b=e[3];let v;e[4]!==b?(v=u.jsx(X,{size:1,children:b}),e[4]=b,e[5]=v):v=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=["bottom-start"],e[6]=f):f=e[6];let w;e[7]!==h?(w=h("share-url.menu-item.open.text"),e[7]=h,e[8]=w):w=e[8];let P;e[9]!==g||e[10]!==d||e[11]!==w?(P=u.jsx(Se,{as:"a","aria-label":w,icon:Zr,mode:"bleed",href:d,rel:"opener",target:"_blank",tooltipProps:null,onClick:g}),e[9]=g,e[10]=d,e[11]=w,e[12]=P):P=e[12];let x;return e[13]!==v||e[14]!==P?(x=u.jsx(Fe,{animate:!0,content:v,fallbackPlacements:f,placement:"bottom",portal:!0,children:P}),e[13]=v,e[14]=P,e[15]=x):x=e[15],x}const Ka=function(n){var U;const e=L.c(27),{fontSize:t,onChange:s,origin:r,padding:a,prefix:o,suffix:i,value:l}=n,c=t===void 0?1:t,p=a===void 0?3:a,{t:d}=ve(ye),{basePath:h}=((U=hn())==null?void 0:U.activeWorkspace)||{},m=h===void 0?"/":h,g=y.useRef(null),[b,v]=y.useState(void 0),[f,w]=y.useState(void 0);let P;e[0]===Symbol.for("react.memo_cache_sentinel")?(P=q=>{v(q.currentTarget.value)},e[0]=P):P=e[0];const x=P;let j;e[1]!==m||e[2]!==s||e[3]!==r||e[4]!==b||e[5]!==d?(j=q=>{var Q;if(q.key==="Enter"){if(b===void 0)return;const V=b.startsWith("/")||b===""?`${r}${b}`:b;if(!V.startsWith(`${r}/`)&&V!==r){w(d("preview-location-input.error",{origin:r,context:"missing-origin"}));return}if(!r&&(V.startsWith(`${m}/`)||V===m)){w(d("preview-location-input.error",{basePath:m,context:"same-base-path"}));return}const Y=V===r?`${r}/`:V;w(void 0),v(void 0),s(Y.slice(r.length)),(Q=g.current)==null||Q.blur()}q.key==="Escape"&&(w(void 0),v(void 0))},e[1]=m,e[2]=s,e[3]=r,e[4]=b,e[5]=d,e[6]=j):j=e[6];const C=j;let _;e[7]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{w(void 0),v(void 0)},e[7]=_):_=e[7];const R=_;let S;e[8]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{w(void 0),v(void 0)},e[8]=S):S=e[8];let E;e[9]!==r||e[10]!==l?(E=[r,l],e[9]=r,e[10]=l,e[11]=E):E=e[11],y.useEffect(S,E);let T,M;e[12]===Symbol.for("react.memo_cache_sentinel")?(M={icon:es},e[12]=M):M=e[12],T=M;const k=f?T:void 0;let I;e[13]!==r||e[14]!==l?(I=()=>{w(void 0),v(r+l)},e[13]=r,e[14]=l,e[15]=I):I=e[15];let A;e[16]===Symbol.for("react.memo_cache_sentinel")?(A={zIndex:1},e[16]=A):A=e[16];const W=b===void 0?`${r}${l}`:b;let O;return e[17]!==f||e[18]!==c||e[19]!==C||e[20]!==p||e[21]!==o||e[22]!==i||e[23]!==k||e[24]!==I||e[25]!==W?(O=u.jsx(u.Fragment,{children:u.jsx(Kr,{clearButton:k,customValidity:f,fontSize:c,onBlur:R,onClear:I,onChange:x,onKeyDownCapture:C,padding:p,prefix:o,style:A,radius:2,ref:g,space:p,suffix:i,value:W})}),e[17]=f,e[18]=c,e[19]=C,e[20]=p,e[21]=o,e[22]=i,e[23]=k,e[24]=I,e[25]=W,e[26]=O):O=e[26],O},Ga=y.lazy(()=>Ae(()=>import("./QRCodeSVG-ukF-lImR.js"),__vite__mapDeps([0,1]))),Pt=24,Xa=16,Qa=224,Ya=pe(ts)`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: ${Pt}px;
  width: ${Pt}px;
`,Ja=Ke.create(Ze),Za=Ke.create(X),eo=Ke.create(Ya),Ln=y.memo(function(n){const{canToggleSharePreviewAccess:e,canUseSharedPreviewAccess:t,initialUrl:s,previewLocationRoute:r,perspective:a}=n,{t:o}=ve(ye),{push:i}=cn(),l=Be({apiVersion:He}),c=Mt(),[p,d]=y.useState(!0),[h,m]=y.useState(!1),[g,b]=y.useState(!1),[v,f]=y.useState(null),w=h||g||p,P=y.useMemo(()=>v?Cs(s,v,r,it(a)):null,[s,a,r,v]),[x,j]=y.useState(null);if(x)throw x;const C=y.useCallback(()=>{i({closable:!0,status:"warning",title:o("share-preview-menu.error_toggle-sharing",{context:"toggle-sharing"})})},[i,o]),_=y.useCallback(async()=>{try{b(!0),await Is(l,"@sanity/presentation",typeof window>"u"?"":location.href,c==null?void 0:c.id),f(null)}catch(E){j(E)}finally{b(!1)}},[l,c==null?void 0:c.id]),R=y.useCallback(async()=>{try{m(!0);const E=await Ts(l,"@sanity/presentation",typeof window>"u"?"":location.href,c==null?void 0:c.id);f(E.secret)}catch(E){j(E)}finally{m(!1)}},[l,c==null?void 0:c.id]),S=y.useCallback(()=>{try{if(!P)throw new Error("No URL to copy");navigator.clipboard.writeText(P.toString()),i({closable:!0,status:"success",title:o("share-url.clipboard.status",{context:"success"})})}catch(E){j(E)}},[i,o,P]);return y.useEffect(()=>{let E=new AbortController,T=[];async function M(I,A){const{result:W,syncTags:O}=await l.fetch(Hr,{},{filterResponse:!1,lastLiveEventId:I,tag:"presentation.fetch-shared-access-secret"});Array.isArray(O)&&(T=O),A.aborted||f(W)}const k=l.live.events().subscribe({next:I=>{I.type==="message"&&(E.abort(),E=new AbortController,I.tags.some(A=>T.includes(A))&&M(I.id,E.signal))},error:j});return M(null,E.signal).finally(()=>d(!1)),()=>{k.unsubscribe(),E.abort()}},[l]),u.jsx(Tr,{button:u.jsx(Se,{"aria-label":o("preview-frame.share-button.aria-label"),icon:Or,mode:"bleed",tooltipProps:null}),id:"share-menu",menu:u.jsx(Ir,{style:{maxWidth:248},padding:t?void 0:0,children:t?u.jsxs(u.Fragment,{children:[u.jsx("label",{style:{cursor:"pointer"},children:u.jsxs(kr,{columns:2,rows:2,gapX:3,gapY:1,style:{justifyContent:"center",alignItems:"center",gridTemplateColumns:"min-content 1fr",gridTemplateRows:"min-content"},paddingTop:3,paddingX:3,children:[u.jsx(Fe,{animate:!0,content:u.jsx(X,{size:1,children:o("share-preview-menu.toggle-button.tooltip",{context:P?"disable":"enable"})}),fallbackPlacements:["bottom-start"],placement:"bottom",portal:!0,children:u.jsx(vn,{checked:h||P!==null&&!g,readOnly:h||g,indeterminate:p,onChange:e?P?_:R:C})}),u.jsx(X,{size:1,weight:"medium",children:o("share-preview-menu.toggle-button.label",{context:"first-line"})}),u.jsx("span",{}),u.jsx(X,{muted:!0,size:1,children:o("share-preview-menu.toggle-button.label",{context:"second-line"})})]})}),u.jsx(de,{padding:3,paddingTop:2,children:u.jsxs(Oe,{space:3,children:[u.jsx(ue,{tone:w||!P?"transparent":void 0,style:{position:"relative",aspectRatio:"1 / 1",display:"flex",alignItems:"center",justifyContent:"center"},children:u.jsx(gn,{children:w?u.jsx(Ja,{muted:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}):P?u.jsx(u.Fragment,{children:u.jsxs(y.Suspense,{fallback:u.jsx(Ze,{}),children:[u.jsx(Ga,{title:o("share-preview-menu.qr-code.title",{url:P.toString()}),value:P.toString(),size:Qa,color:"var(--card-fg-color)",logoSize:Pt+Xa}),u.jsx(eo,{initial:{opacity:-.5},animate:{opacity:1.5},exit:{opacity:0}})]})}):u.jsx(Za,{muted:!0,size:1,style:{maxWidth:"100px",textWrap:"pretty",textAlign:"center"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o("share-preview-menu.qr-code.placeholder")})})}),u.jsx(X,{muted:!0,size:1,children:o("share-preview-menu.qr-code.instructions")})]})}),u.jsx(Ar,{}),u.jsx(Mr,{disabled:!P||g,icon:$r,onClick:S,text:o("share-preview-menu.copy-url.text")})]}):u.jsx(ue,{padding:2,tone:"caution",radius:3,children:u.jsx(X,{style:{textWrap:"pretty"},children:o("share-preview-menu.error",{context:"missing-grants"})})})}),popover:{constrainSize:!0,placement:"bottom",portal:!0}})});Ln.displayName="Memo(SharePreviewMenu)";const to=n=>{const e=L.c(100),{canSharePreviewAccess:t,canToggleSharePreviewAccess:s,canUseSharedPreviewAccess:r,dispatch:a,iframe:o,iframeRef:i,initialUrl:l,navigatorEnabled:c,onPathChange:p,onRefresh:d,openPopup:h,overlaysConnection:m,perspective:g,previewUrl:b,setViewport:v,targetOrigin:f,toggleNavigator:w,toggleOverlay:P,viewport:x,visualEditing:j}=n,{overlaysEnabled:C}=j,{t:_}=ve(ye);let R;e[0]!==v||e[1]!==x?(R=()=>v(x==="desktop"?"mobile":"desktop"),e[0]=v,e[1]=x,e[2]=R):R=e[2];const S=R;let E;E=f===location.origin?"":f;const T=E;let M;e[3]!==a||e[4]!==i||e[5]!==d||e[6]!==b||e[7]!==f?(M=()=>{d(()=>{i.current&&(a({type:fn}),Object.assign(i.current,{src:`${f}${b||"/"}`}))})},e[3]=a,e[4]=i,e[5]=d,e[6]=b,e[7]=f,e[8]=M):M=e[8];const k=M;let I;const A=new URL(b||"/",f),{pathname:W,search:O}=Rs(A);I=`${W}${O}`;const U=I;let q;e[9]===Symbol.for("react.memo_cache_sentinel")?(q={width:"100%"},e[9]=q):q=e[9];let Q;e[10]!==c||e[11]!==_||e[12]!==w?(Q=w&&u.jsx(Se,{"aria-label":_("preview-frame.navigator.toggle-button.aria-label"),icon:_r,mode:"bleed",onClick:w,selected:c,tooltipProps:{content:u.jsx(X,{size:1,children:_("preview-frame.navigator.toggle-button.tooltip")}),fallbackPlacements:["bottom-start"],placement:"bottom"}}),e[10]=c,e[11]=_,e[12]=w,e[13]=Q):Q=e[13];let V;e[14]===Symbol.for("react.memo_cache_sentinel")?(V={whiteSpace:"nowrap"},e[14]=V):V=e[14];const Y=C?"disable":"enable";let re;e[15]!==_||e[16]!==Y?(re=_("preview-frame.overlay.toggle-button.tooltip",{context:Y}),e[15]=_,e[16]=Y,e[17]=re):re=e[17];let ie;e[18]!==re?(ie=u.jsx(de,{padding:1,children:u.jsx(X,{size:1,children:re})}),e[18]=re,e[19]=ie):ie=e[19];let z;e[20]===Symbol.for("react.memo_cache_sentinel")?(z=u.jsx(de,{paddingY:1,children:u.jsx(Lr,{keys:["Alt"],style:{marginTop:-4,marginBottom:-4}})}),e[20]=z):z=e[20];let Z;e[21]!==ie?(Z=u.jsxs(ne,{align:"center",style:V,children:[ie,z]}),e[21]=ie,e[22]=Z):Z=e[22];let ce;e[23]===Symbol.for("react.memo_cache_sentinel")?(ce=["bottom-start"],e[23]=ce):ce=e[23];let le;e[24]===Symbol.for("react.memo_cache_sentinel")?(le={lineHeight:0,borderRadius:999,userSelect:"none"},e[24]=le):le=e[24];const B=C?"transparent":void 0;let F;e[25]===Symbol.for("react.memo_cache_sentinel")?(F={margin:-4},e[25]=F):F=e[25];const H=o.status==="loading"||m!=="connected";let K;e[26]!==C||e[27]!==H||e[28]!==P?(K=u.jsx("div",{style:F,children:u.jsx(vn,{checked:C,onChange:P,disabled:H})}),e[26]=C,e[27]=H,e[28]=P,e[29]=K):K=e[29];const se=!C;let G;e[30]!==_?(G=_("preview-frame.overlay.toggle-button.text"),e[30]=_,e[31]=G):G=e[31];let ee;e[32]!==se||e[33]!==G?(ee=u.jsx(de,{children:u.jsx(X,{muted:se,size:1,weight:"medium",children:G})}),e[32]=se,e[33]=G,e[34]=ee):ee=e[34];let J;e[35]!==K||e[36]!==ee?(J=u.jsxs(ne,{align:"center",gap:3,children:[K,ee]}),e[35]=K,e[36]=ee,e[37]=J):J=e[37];let ae;e[38]!==B||e[39]!==J?(ae=u.jsx(ue,{as:"label",flex:"none",padding:3,marginX:1,style:le,tone:B,children:J}),e[38]=B,e[39]=J,e[40]=ae):ae=e[40];let oe;e[41]!==Z||e[42]!==ae?(oe=u.jsx(Fe,{animate:!0,content:Z,fallbackPlacements:ce,placement:"bottom",portal:!0,children:ae}),e[41]=Z,e[42]=ae,e[43]=oe):oe=e[43];let he;e[44]!==o.status||e[45]!==_?(he=o.status==="loaded"?_("preview-frame.refresh-button.tooltip"):_("preview-frame.status",{context:o.status}),e[44]=o.status,e[45]=_,e[46]=he):he=e[46];let fe;e[47]!==he?(fe=u.jsx(X,{size:1,children:he}),e[47]=he,e[48]=fe):fe=e[48];let _e;e[49]===Symbol.for("react.memo_cache_sentinel")?(_e=["bottom-end"],e[49]=_e):_e=e[49];let me;e[50]!==_?(me=_("preview-frame.refresh-button.aria-label"),e[50]=_,e[51]=me):me=e[51];const je=o.status==="reloading"||o.status==="refreshing";let ge;e[52]!==k||e[53]!==me||e[54]!==je?(ge=u.jsx(Se,{"aria-label":me,icon:zr,mode:"bleed",loading:je,onClick:k,tooltipProps:null}),e[52]=k,e[53]=me,e[54]=je,e[55]=ge):ge=e[55];let Ee;e[56]!==fe||e[57]!==ge?(Ee=u.jsx(de,{padding:1,children:u.jsx(Fe,{animate:!0,content:fe,fallbackPlacements:_e,placement:"bottom",portal:!0,children:ge})}),e[56]=fe,e[57]=ge,e[58]=Ee):Ee=e[58];let be;e[59]!==h||e[60]!==g||e[61]!==T||e[62]!==U||e[63]!==f?(be=u.jsx(de,{padding:1,children:u.jsx(Ha,{openPopup:h,previewLocationOrigin:T,previewLocationRoute:U,perspective:g,targetOrigin:f})}),e[59]=h,e[60]=g,e[61]=T,e[62]=U,e[63]=f,e[64]=be):be=e[64];let Re;e[65]!==p||e[66]!==T||e[67]!==U||e[68]!==Ee||e[69]!==be?(Re=u.jsx(de,{flex:1,children:u.jsx(Ka,{prefix:Ee,onChange:p,origin:T,suffix:be,value:U})}),e[65]=p,e[66]=T,e[67]=U,e[68]=Ee,e[69]=be,e[70]=Re):Re=e[70];const Le=x==="desktop"?"narrow":"full";let Ce;e[71]!==_||e[72]!==Le?(Ce=_("preview-frame.viewport-button.tooltip",{context:Le}),e[71]=_,e[72]=Le,e[73]=Ce):Ce=e[73];let Te;e[74]!==Ce?(Te=u.jsx(X,{size:1,children:Ce}),e[74]=Ce,e[75]=Te):Te=e[75];let Me;e[76]===Symbol.for("react.memo_cache_sentinel")?(Me=["bottom-start"],e[76]=Me):Me=e[76];let we;e[77]!==_?(we=_("preview-frame.viewport-button.aria-label"),e[77]=_,e[78]=we):we=e[78];const ze=x==="desktop"?jr:Er;let xe;e[79]!==we||e[80]!==ze||e[81]!==S||e[82]!==x?(xe=u.jsx(Se,{"data-testid":"preview-viewport-toggle","data-viewport":x,"aria-label":we,icon:ze,mode:"bleed",onClick:S,tooltipProps:null}),e[79]=we,e[80]=ze,e[81]=S,e[82]=x,e[83]=xe):xe=e[83];let Pe;e[84]!==Te||e[85]!==xe?(Pe=u.jsx(ne,{align:"center",flex:"none",gap:1,children:u.jsx(Fe,{animate:!0,content:Te,fallbackPlacements:Me,placement:"bottom",portal:!0,children:xe})}),e[84]=Te,e[85]=xe,e[86]=Pe):Pe=e[86];let $;e[87]!==t||e[88]!==s||e[89]!==r||e[90]!==l||e[91]!==g||e[92]!==U?($=t&&u.jsx(ne,{align:"center",flex:"none",gap:1,children:u.jsx(Ln,{canToggleSharePreviewAccess:s,canUseSharedPreviewAccess:r,previewLocationRoute:U,initialUrl:l,perspective:g})}),e[87]=t,e[88]=s,e[89]=r,e[90]=l,e[91]=g,e[92]=U,e[93]=$):$=e[93];let N;return e[94]!==oe||e[95]!==Re||e[96]!==Pe||e[97]!==$||e[98]!==Q?(N=u.jsxs(ne,{align:"center",gap:1,paddingX:1,style:q,children:[Q,oe,Re,Pe,$]}),e[94]=oe,e[95]=Re,e[96]=Pe,e[97]=$,e[98]=Q,e[99]=N):N=e[99],N};function no(n){var c;const e=L.c(7),t=ro,s=(c=n.options)==null?void 0:c.component;let r;e[0]!==s||e[1]!==n?(r=s?u.jsx(s,{...n,renderDefault:t}):t(n),e[0]=s,e[1]=n,e[2]=r):r=e[2];const a=r;let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o={position:"relative"},e[3]=o):o=e[3];let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i={minHeight:0},e[4]=i):i=e[4];let l;return e[5]!==a?(l=u.jsx(ue,{flex:"none",padding:2,borderBottom:!0,style:o,children:u.jsx(ne,{align:"center",style:i,children:a})}),e[5]=a,e[6]=l):l=e[6],l}function ro(n){return u.jsx(to,{...n})}const ft=Ke.create(ne),zn=y.memo(y.forwardRef(function(n,e){const{dispatch:t,iframe:s,header:r,initialUrl:a,loadersConnection:o,overlaysConnection:i,perspective:l,viewport:c,vercelProtectionBypass:p}=n,[d,h]=y.useState(null),m=it(d===null?l:d),g=y.useMemo(()=>{const z=new URL(a);return z.searchParams.get(Ue)||z.searchParams.set(Ue,m),(p||z.searchParams.get(Ne))&&z.searchParams.set(Et,"samesitenone"),p&&!z.searchParams.get(Ne)&&z.searchParams.set(Ne,p),z},[a,m,p]);y.useEffect(()=>{o==="connected"&&h(z=>z===null?l:z)},[o,l]);const{t:b}=ve(ye),{devMode:v}=At(),f=wr(),w=y.useRef(null),P=u.jsx(no,{...n,iframeRef:w,options:r});y.useImperativeHandle(e,()=>w.current);const x=s.status==="loading"||s.status==="reloading",[j,C]=y.useState(!1),_=s.status==="refreshing",[R,S]=y.useState(!1),E=x||_||i==="connecting",T=y.useCallback(()=>{w.current&&(w.current.src=g.toString(),t({type:fn}))},[t,g]),M=y.useCallback(()=>{I(!0)},[]),[k,I]=y.useState(!1),[A,W]=y.useState(!1);y.useEffect(()=>{if(!(x||_)&&(i==="connecting"||i==="reconnecting")){const z=setTimeout(()=>{W(!0)},5e3);return()=>clearTimeout(z)}},[i,x,_]),y.useEffect(()=>{if(!(x||_||!A)){if(i==="connected"&&(S(!1),W(!1),C(!1),I(!1)),i==="connecting"){const z=setTimeout(()=>{C(!0),console.error("Unable to connect to visual editing. Make sure you've setup '@sanity/visual-editing' correctly")},Vt);return()=>clearTimeout(z)}if(i==="reconnecting"){const z=setTimeout(()=>{C(!0),S(!0)},Vt);return()=>clearTimeout(z)}}},[x,i,_,A]);const O=y.useCallback(()=>{t({type:pn})},[t]);y.useEffect(()=>{if(!w.current)return;const z=w.current;function Z(){z===document.activeElement&&z.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0}))}return window.addEventListener("blur",Z),()=>{window.removeEventListener("blur",Z)}},[]);const U=y.useMemo(()=>(x||i==="connecting"&&s.status!=="refreshing")&&!k,[k,s.status,x,i]),q=y.useSyncExternalStore(y.useCallback(()=>()=>{},[]),()=>CSS.supports("(view-transition-name: test)")),Q=y.useMemo(()=>[U?"background":"active",x?"reloading":"idle",q?"":c,A&&!k?"timedOut":""],[q,k,x,U,A,c]),[V,Y]=y.useState(c),[re,ie]=y.useState(gt[c]);return y.useEffect(()=>{if(q&&c!==V){const z=()=>{Y(c),ie(gt[c])};!f&&"startViewTransition"in document&&typeof document.startViewTransition=="function"?document.startViewTransition(()=>xr.flushSync(()=>z())):z()}},[q,f,V,c]),u.jsx(cs,{transition:f?{duration:0}:void 0,children:u.jsxs(Pr,{children:[P,u.jsx(ue,{flex:1,tone:"transparent",children:u.jsxs(ne,{align:"center",height:"fill",justify:"center",padding:(q?V:c)==="desktop"?0:2,sizing:"border",style:{position:"relative",cursor:E?"wait":void 0},children:[u.jsx(gn,{children:!R&&!x&&!_&&A&&!k?u.jsx(ft,{initial:"initial",animate:"animate",exit:"exit",variants:Jt,justify:"center",align:"center",style:{inset:"0",position:"absolute",backdropFilter:j?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",transition:"backdrop-filter 0.2s ease-in-out",WebkitBackdropFilter:j?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",WebkitTransition:"-webkit-backdrop-filter 0.2s ease-in-out",zIndex:1},children:u.jsxs(ne,{style:{...st[c]},justify:"center",align:"center",direction:"column",gap:4,children:[j&&u.jsx(Se,{disabled:!0,mode:"ghost",text:b("preview-frame.continue-button.text"),style:{opacity:0}}),u.jsx(ue,{radius:2,tone:j?"caution":"inherit",padding:4,shadow:1,children:u.jsxs(ne,{justify:"center",align:"center",direction:"column",gap:4,children:[u.jsx(Ze,{muted:!0}),u.jsx(X,{muted:!0,size:1,children:j?b("preview-frame.status",{context:"timeout"}):b("preview-frame.status",{context:"connecting"})})]})}),j&&u.jsx(Se,{tone:"critical",onClick:M,text:b("preview-frame.continue-button.text")})]})}):(x||i==="connecting"&&s.status!=="refreshing")&&!k?u.jsx(ft,{initial:"initial",animate:"animate",exit:"exit",variants:Jt,justify:"center",align:"center",style:{inset:"0",position:"absolute"},children:u.jsxs(ne,{style:{...st[c]},justify:"center",align:"center",direction:"column",gap:4,children:[u.jsx(Ze,{muted:!0}),u.jsx(X,{muted:!0,size:1,children:b("preview-frame.status",{context:"loading"})})]})}):R&&!k?u.jsx(ft,{initial:"initial",animate:"animate",exit:"exit",variants:so,justify:"center",align:"center",style:{background:"var(--card-bg-color)",inset:"0",position:"absolute"},children:u.jsx(Nt,{flex:1,message:b("preview-frame.connection.error.text"),onRetry:T,onContinueAnyway:M,children:v&&u.jsxs(u.Fragment,{children:[i!=="connected"&&u.jsx(ue,{padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(et,{muted:!0,size:0,children:b("preview-frame.overlay.connection-status.label")}),u.jsx(tt,{size:1,children:b("channel.status",{context:i})})]})}),o!=="connected"&&u.jsx(ue,{padding:3,radius:2,tone:"critical",children:u.jsxs(Oe,{space:3,children:[u.jsx(et,{muted:!0,size:0,children:b("preview-frame.loader.connection-status.label")}),u.jsx(tt,{size:1,children:b("channel.status",{context:o})})]})})]})})}):null}),u.jsx(Ba,{animate:Q,initial:["background"],onLoad:O,preventClick:U,ref:w,src:g.toString(),style:re,variants:gt})]})})]})})}));zn.displayName="Memo(ForwardRef(Preview))";const st={desktop:{width:"100%",height:"100%"},mobile:{width:375,height:650}},Jt={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},so={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},gt={desktop:{...st.desktop,boxShadow:"0 0 0 0px var(--card-border-color)"},mobile:{...st.mobile,boxShadow:"0 0 0 1px var(--card-border-color)"},background:{opacity:0,scale:1},idle:{scale:1},reloading:{scale:[1,1,1,.98]},active:{opacity:[0,0,1],scale:1},timedOut:{opacity:[0,0,1]}};function ao(){let n=!1;return(...e)=>{n||(console.warn(...e),n=!0)}}const oo=ao();function io(n,e){const t=L.c(9);fr(n);let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s={},t[0]=s):s=t[0];const[r,a]=y.useState(s);let o;t[1]===Symbol.for("react.memo_cache_sentinel")?(o={},t[1]=o):o=t[1];const[i,l]=y.useState(o),c=y.useRef("");let p;t[2]!==e?(p=(f,w,P)=>{const x=(P===void 0?[]:P).filter(lo);(w==="published"?a:l)(j=>{const C={};for(const R of x)C[R._id]=R;if(c.current!==e.current.url)return c.current=e.current.url,{[f]:C};const _=j[f];return os(_,C)?j:{...j,[f]:C}})},t[2]=e,t[3]=p):p=t[3];const d=p;let h;const m=n==="published"?r:i;let g;if(t[4]!==m){const f=Object.values(m).reduce(co,{});g=Object.values(f),t[4]=m,t[5]=g}else g=t[5];h=g;const b=h;let v;return t[6]!==b||t[7]!==d?(v=[b,d],t[6]=b,t[7]=d,t[8]=v):v=t[8],v}function co(n,e){return Object.values(e).forEach(t=>{n[t._id]=t}),n}function lo(n){return"_projectId"in n&&n._projectId?(oo("Cross dataset references are not supported yet, ignoring source document",n),!1):n}function Wn(n,e){return n instanceof Function?n(e):n}function uo(n,e){var t;if(n.resolve){const s=(t=n.resolve(e))==null?void 0:t.filter;return s?`// groq
*[${s}][0]{_id, _type}`:void 0}return"type"in n?`// groq
*[_type == "${n.type}"][0]{_id, _type}`:`// groq
*[${Wn(n.filter,e)}][0]{_id, _type}`}function po(n,e){var t;return n.resolve?((t=n.resolve(e))==null?void 0:t.params)??e.params:"type"in n?{}:Wn(n.params,e)??e.params}function mo(n,e){const t=Array.isArray(n)?n:[n];for(n of t){let s,r=n;if(typeof n=="string")try{const a=new URL(n);s=a.origin,r=a.pathname}catch{}if(!(s&&e.origin!==s))try{const a=Ms(r,{decode:decodeURIComponent})(e.pathname);if(a){const{params:o,path:i}=a;return{origin:s,params:o,path:i}}}catch{throw new Error(`"${n}" is not a valid route pattern`)}}}function ho(n){var C,_;const e=L.c(22),{navigate:t,navigationHistory:s,path:r,previewUrl:a,resolvers:o}=n;let i;e[0]!==o?(i=o===void 0?[]:o,e[0]=o,e[1]=i):i=e[1];const l=i,{state:c}=Tt(),{perspectiveStack:p}=It();let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d={apiVersion:He},e[2]=d):d=e[2];const h=Be(d);let m;e[3]!==r||e[4]!==c?(m=r||((_=(C=c._searchParams)==null?void 0:C.find(fo))==null?void 0:_[1])||"",e[3]=r,e[4]=c,e[5]=m):m=e[5];const g=m,[b,v]=y.useState(void 0),f=y.useRef(void 0);let w;e[6]!==t||e[7]!==s?(w=(R,S)=>{var E,T;(!R||f.current!==R._id)&&(v({document:R,path:S.pathname}),f.current=R==null?void 0:R._id,((E=s.at(-1))==null?void 0:E.id)===((T=s.at(-2))==null?void 0:T.id)&&(t==null||t({id:R==null?void 0:R._id,type:R==null?void 0:R._type})))},e[6]=t,e[7]=s,e[8]=w):w=e[8];const P=dn(w);let x;e[9]!==h||e[10]!==P||e[11]!==p||e[12]!==a||e[13]!==g||e[14]!==l?(x=()=>{const R=typeof a=="string"?a:typeof a=="object"&&(a==null?void 0:a.origin)||location.origin,S=new URL(g,R);if(l.length){let E;for(const T of l){const M=mo(T.route,S);if(M){E={context:M,resolver:T};break}}if(E){const T=uo(E.resolver,E.context),M=po(E.resolver,E.context);if(T){const k=new AbortController,I={perspective:p,signal:k.signal,tag:"use-main-document"};return h.fetch(T,M,I).then(A=>P(A,S)).catch(A=>{A instanceof Error&&A.name==="AbortError"||(v({document:void 0,path:S.pathname}),f.current=void 0)}),()=>{k.abort()}}}}v(void 0),f.current=void 0},e[9]=h,e[10]=P,e[11]=p,e[12]=a,e[13]=g,e[14]=l,e[15]=x):x=e[15];let j;return e[16]!==h||e[17]!==p||e[18]!==a||e[19]!==g||e[20]!==l?(j=[h,a,g,l,p],e[16]=h,e[17]=p,e[18]=a,e[19]=g,e[20]=l,e[21]=j):j=e[21],y.useEffect(x,j),b}function fo(n){const[e]=n;return e==="preview"}const go=yn($t(),wn(1));bn(go);const vo=/^([\w-]+):(0|[1-9][0-9]*)$/,yo=/^([\w-]+):([0-9]+),([0-9]+)$/,bo=/^([\w-]+):([\w-]+)$/;function wo(n){const e=[];for(const t of n.split(".")){const s=vo.exec(t);if(s){e.push(s[1],Number(s[2]));continue}const r=yo.exec(t);if(r){e.push(r[1],[Number(r[2]),Number(r[3])]);continue}const a=bo.exec(t);if(a){e.push(a[1],{_key:a[2]});continue}e.push(t)}return e}const Zt=yn($t(),wn(1));Wr({origin:Zt,href:Zt,data:bn(ns($t(),ss()))});function xo(n){var t;if(n===void 0)return;const e=(t=decodeURIComponent(n))==null?void 0:t.split(".");return e[0]==="drafts"&&e.shift(),e.join(".")}function Po(n){if(n!==void 0)return mn.toString(wo(decodeURIComponent(n)))}function So(n){return{id:xo(n.id),path:Po(n.path),type:n.type}}function Je(n){return Object.fromEntries(Object.entries(n).filter(([,e])=>e!==void 0&&e!==""&&e!==null))}function _o({initialPreviewUrl:n,routerNavigate:e,routerState:t,routerSearchParams:s,frameStateRef:r}){const a=y.useMemo(()=>{const{id:d,path:h,type:m}=So(t);return{id:d,type:m,path:h,preview:s.preview||`${n.pathname}${n.search}`,perspective:s.perspective,viewport:s.viewport,inspect:s.inspect,rev:s.rev,since:s.since,template:s.template,templateParams:s.templateParams,view:s.view,pathKey:s.pathKey,instruction:s.instruction,comment:s.comment,changesInspectorTab:s.changesInspectorTab}},[t,s,n]),o=y.useMemo(()=>Je({inspect:a.inspect,path:a.path,rev:a.rev,since:a.since,template:a.template,templateParams:a.templateParams,view:a.view,pathKey:a.pathKey,instruction:a.instruction,comment:a.comment,changesInspectorTab:a.changesInspectorTab}),[a.changesInspectorTab,a.comment,a.inspect,a.instruction,a.path,a.pathKey,a.rev,a.since,a.template,a.templateParams,a.view]),i=y.useMemo(()=>Je({perspective:a.perspective,preview:a.preview,viewport:a.viewport}),[a.perspective,a.preview,a.viewport]),l=y.useRef(t);y.useEffect(()=>{l.current=t},[t]);const[c,p]=y.useState([t]);return{navigate:y.useCallback((d,h={},m)=>{d.id&&(d.id=at(d.id));const{_searchParams:g,...b}=l.current,v=(g||[]).reduce((x,[j,C])=>(x[j]=C,x),{}),f=Je({...b,...d}),w=Je({...v,...h});b.id!==f.id&&(delete w.template,delete w.templateParams),f._searchParams=Object.entries(w).reduce((x,[j,C])=>[...x,[j,C]],[]);const P=m??w.preview===r.current.url;p(x=>[...x,f]),e(f,{replace:P})},[e,r]),navigationHistory:c,params:a,searchParams:i,structureParams:o}}const jo=n=>{const e=L.c(10),[t,s]=y.useState(Eo);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=d=>{const h=window.open(d,"_blank");h&&s(m=>new Set(m).add(h))},e[0]=r):r=e[0];const a=r;let o,i;e[1]!==n||e[2]!==t?(o=()=>{const d=[];if(t.size&&n)for(const h of t)h&&"closed"in h&&!h.closed&&d.push(n.addTarget(h));return()=>{d.forEach(Ro)}},i=[n,t],e[1]=n,e[2]=t,e[3]=o,e[4]=i):(o=e[3],i=e[4]),y.useEffect(o,i);let l,c;e[5]!==t?(l=()=>{if(t.size){const d=setInterval(()=>{const h=new Set;for(const m of t)m&&"closed"in m&&m.closed&&h.add(m);h.size&&s(m=>{const g=new Set(m);for(const b of h)g.delete(b);return g})},Ur);return()=>{clearInterval(d)}}},c=[t],e[5]=t,e[6]=l,e[7]=c):(l=e[6],c=e[7]),y.useEffect(l,c);let p;return e[8]!==t?(p={popups:t,open:a},e[8]=t,e[9]=p):p=e[9],p};function Eo(){return new Set}function Ro(n){return n()}function Co(n,e,t,s,r){var d,h;const a=Be({apiVersion:He}),o=hn(),i=((d=o==null?void 0:o.activeWorkspace)==null?void 0:d.basePath)||"/",l=((h=o==null?void 0:o.activeWorkspace)==null?void 0:h.name)||"default",c=Io(e,i,l,s),p=ko(r&&typeof n=="object"||typeof n=="function",c);return Tn(async()=>{if(typeof n=="string"){const g=new URL(n,location.origin);let b=g;try{if(s){const v=new URL(s,g);v.origin===g.origin&&(b=v)}}catch{}return location.origin===b.origin&&(b.pathname.startsWith(`${i}/`)||b.pathname===i)?g:b}const m=await(typeof n=="object"?Ds(n):n)({client:a,previewUrlSecret:p,studioPreviewPerspective:it(t),previewSearchParam:s,studioBasePath:i});return new URL(m,location.origin)},[...c,p])}const To=Symbol("sanity/presentation/resolveUUID");function Io(n,e,t,s){const r=L.c(12);let a;r[0]!==s?(a=()=>s||"",r[0]=s,r[1]=a):a=r[1];const[o,i]=y.useState(a),l=y.useRef(0);let c,p;r[2]!==o||r[3]!==s?(c=()=>{if(o&&s)return window.clearTimeout(l.current),()=>{l.current=window.setTimeout(()=>{i("")},100)}},p=[o,s],r[2]=o,r[3]=s,r[4]=c,r[5]=p):(c=r[4],p=r[5]),y.useEffect(c,p);const d=Mt();let h;const m=d==null?void 0:d.id;let g;return r[6]!==e||r[7]!==o||r[8]!==m||r[9]!==n||r[10]!==t?(g=["sanity/presentation",e,t,n,m,To,o],r[6]=e,r[7]=o,r[8]=m,r[9]=n,r[10]=t,r[11]=g):g=r[11],h=g,h}function ko(n,e){const t=L.c(10);let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s={apiVersion:He},t[0]=s):s=t[0];const r=Be(s),a=Mt(),[o,i]=y.useState("");let l;t[1]!==r||t[2]!==(a==null?void 0:a.id)||t[3]!==e||t[4]!==n||t[5]!==o?(l=n?Tn(async()=>await Us(r,"@sanity/presentation",typeof window>"u"?"":location.href,a==null?void 0:a.id),[...e,o]):null,t[1]=r,t[2]=a==null?void 0:a.id,t[3]=e,t[4]=n,t[5]=o,t[6]=l):l=t[6];const c=l;let p,d;return t[7]!==c?(p=()=>{if(!c)return;const h=setTimeout(()=>{y.startTransition(()=>i(c.expiresAt.toString()))},c.expiresAt.getTime()-Date.now());return()=>clearTimeout(h)},d=[c],t[7]=c,t[8]=p,t[9]=d):(p=t[8],d=t[9]),y.useEffect(p,d),(c==null?void 0:c.secret)||null}function vt(){const n=L.c(4);let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e=new Map,n[0]=e):e=n[0];const[t,s]=y.useState(e);let r;e:{const c=Array.from(t.values());if(c.find($o)){r="connected";break e}const p=c.filter(Mo);if(p.length){r=p.some(Ao)?"connecting":"reconnecting";break e}r="idle"}const a=r;let o;n[1]===Symbol.for("react.memo_cache_sentinel")?(o=c=>{s(p=>{var h;const d=new Map(p);if(c.status==="disconnected")d.delete(c.connection);else{const m=((h=d.get(c.connection))==null?void 0:h.hasConnected)||c.status==="connected",g=c.status==="handshaking"?"connecting":c.status;d.set(c.connection,{status:g,hasConnected:m})}return d})},n[1]=o):o=n[1];const i=o;let l;return n[2]!==a?(l=[a,i],n[2]=a,n[3]=l):l=n[3],l}function Ao(n){const{hasConnected:e}=n;return!e}function Mo(n){const{status:e}=n;return e==="connecting"}function $o(n){const{status:e}=n;return e==="connected"}const Oo=y.lazy(()=>Ae(()=>import("./LiveQueries-D4psNZkn.js"),__vite__mapDeps([2,1,3]))),Lo=y.lazy(()=>Ae(()=>import("./PostMessageDocuments-76WbPwKI.js"),__vite__mapDeps([4,1]))),zo=y.lazy(()=>Ae(()=>import("./PostMessageRefreshMutations-BvV7oQ3-.js"),__vite__mapDeps([5,1]))),Wo=y.lazy(()=>Ae(()=>import("./PostMessagePerspective-B36o3MF2.js"),__vite__mapDeps([6,1]))),Uo=y.lazy(()=>Ae(()=>import("./PostMessagePreviewSnapshots-BoYq6yzb.js"),__vite__mapDeps([7,1]))),Do=y.lazy(()=>Ae(()=>import("./PostMessageSchema-CnkCcs0D.js"),__vite__mapDeps([8,1]))),No=y.lazy(()=>Ae(()=>import("./PostMessageTelemetry-P09juzds.js"),__vite__mapDeps([9,1]))),qo=pe(ne)`
  overflow-x: auto;
`;function Fo(n){var Me,we,ze,xe,Pe;const{canCreateUrlPreviewSecrets:e,canToggleSharePreviewAccess:t,canUseSharedPreviewAccess:s,tool:r,vercelProtectionBypass:a}=n,o=(Me=r.options)==null?void 0:Me.components,i=(we=r.options)==null?void 0:we.previewUrl,l=r.name||ar,{unstable_navigator:c,unstable_header:p}=o||{},{navigate:d,state:h}=Tt(),m=un(Object.fromEntries(h._searchParams||[])),{perspectiveStack:g,selectedPerspectiveName:b="drafts",selectedReleaseId:v}=It(),f=v?g:b,w=Co(i||"/",l,f,m.preview||null,e),P=y.useMemo(()=>i&&typeof i=="object"&&"draftMode"in i&&i.draftMode?(console.warn("previewUrl.draftMode is deprecated, use previewUrl.previewMode instead"),i.draftMode.shareAccess!==!1):i&&typeof i=="object"&&"previewMode"in i&&i.previewMode?i.previewMode.shareAccess!==!1:!1,[i]),[x]=y.useState(()=>{var N;const $=(N=r.options)==null?void 0:N.devMode;return typeof $=="function"?$():typeof $=="boolean"?$:typeof window<"u"&&window.location.hostname==="localhost"}),j=y.useMemo(()=>w.origin,[w.origin]),C=y.useRef(null),[_,R]=y.useState(),[S,E]=y.useState(null),T=y.useRef({title:void 0,url:void 0}),{navigate:M,navigationHistory:k,params:I,searchParams:A,structureParams:W}=_o({initialPreviewUrl:w,routerNavigate:d,routerState:h,routerSearchParams:m,frameStateRef:T}),O=y.useMemo(()=>In(M,50),[M]),[U,q]=y.useReducer(or,{},ir),Q=y.useMemo(()=>I.viewport?"mobile":"desktop",[I.viewport]),[V,Y]=io(f,T),re=cr(),ie=lr(),z=ho({navigate:M,navigationHistory:k,path:I.preview,previewUrl:(ze=r.options)==null?void 0:ze.previewUrl,resolvers:(Pe=(xe=r.options)==null?void 0:xe.resolve)==null?void 0:Pe.mainDocuments}),[Z,ce]=vt(),[le,B]=vt(),[F,H]=vt(),{open:K}=jo(_),se=U.iframe.status==="loading";y.useEffect(()=>{var D;const $=(D=C.current)==null?void 0:D.contentWindow;if(!$||se)return;const N=xs({targetOrigin:j});return N.addTarget($),R(N),()=>{N.destroy(),R(void 0)}},[j,se]);const G=dn(($,N,D)=>O($,N,D));y.useEffect(()=>{if(!_)return;const $=_.createChannel({name:"presentation",heartbeat:!0,connectTo:"visual-editing"},rt().provide({actors:Kt()}));$.on("visual-editing/focus",D=>{"id"in D&&G({type:D.type,id:D.id,path:D.path})}),$.on("visual-editing/navigate",D=>{const{title:Un,url:Ge}=D;if(T.current.url!==Ge)try{const[Dn,Nn]=Ge.split("?"),Xe=new URLSearchParams(Nn);Xe.delete(Ne),Xe.delete(Et),G({},{preview:`${Dn}${Xe.size>0?"?":""}${Xe}`})}catch{G({},{preview:Ge})}T.current={title:Un,url:Ge}}),$.on("visual-editing/meta",D=>{T.current.title=D.title}),$.on("visual-editing/toggle",D=>{q({type:ur,enabled:D.enabled})}),$.on("visual-editing/documents",D=>{Y("visual-editing",D.perspective,D.documents)}),$.on("visual-editing/refreshing",D=>{D.source==="manual"?clearTimeout(be.current):D.source==="mutation"&&q({type:Ft})}),$.on("visual-editing/refreshed",()=>{q({type:pn})}),$.onStatus(ce);const N=$.start();return E($),()=>{N(),E(null)}},[_,Y,ce,j]),y.useEffect(()=>{if(!_)return;const $=_.createChannel({name:"presentation",connectTo:"preview-kit",heartbeat:!0},rt().provide({actors:Kt()}));return $.onStatus(H),$.on("preview-kit/documents",N=>{N.projectId===re&&N.dataset===ie&&Y("preview-kit",N.perspective,N.documents)}),$.start()},[_,ie,re,Y,H,j]);const ee=y.useCallback($=>{O({path:mn.toString($)},{},!0)},[O]),J=y.useCallback($=>{const N=new URL($,w.origin),D=N.pathname+N.search;N.origin===w.origin&&D!==I.preview&&O({},{preview:D})},[w,I,O]),ae=y.useCallback($=>{O({},$)},[O]);y.useEffect(()=>{I.id&&I.path?S==null||S.post("presentation/focus",{id:I.id,path:I.path}):S==null||S.post("presentation/blur")},[I.id,I.path,S]),y.useEffect(()=>{T.current.url&&I.preview&&T.current.url!==I.preview&&(T.current.url=I.preview,Z!=="connected"&&C.current?C.current.src=`${j}${I.preview}`:S==null||S.post("presentation/navigate",{url:I.preview,type:"replace"}))},[Z,j,I.preview,S]);const oe=y.useCallback(()=>S==null?void 0:S.post("presentation/toggle-overlay"),[S]),[he,fe]=y.useState(null);y.useEffect(()=>{const $=D=>{en(D)&&oe()},N=D=>{en(D)&&oe(),Bo(["mod","\\"],D)&&oe()};return window.addEventListener("keydown",N),window.addEventListener("keyup",$),()=>{window.removeEventListener("keydown",N),window.removeEventListener("keyup",$)}},[oe]);const[_e,me]=y.useState(null),[{navigatorEnabled:je,toggleNavigator:ge},Ee]=za({unstable_navigator:c}),be=y.useRef(void 0),Re=y.useCallback($=>{if(q({type:Ft}),S){be.current=window.setTimeout($,300),S.post("presentation/refresh",{source:"manual",livePreviewEnabled:F==="connected"||le==="connected"});return}$()},[le,F,S]),Le=dr(),Ce=y.useCallback(({id:$,type:N,path:D})=>{if(T.current.url)return{title:T.current.title||T.current.url,name:"edit",params:{id:$,path:D,type:N,inspect:mr,workspace:Le.name,mode:pr,preview:I.preview}}},[I.preview,Le.name]),Te=y.useCallback($=>{O({},{viewport:$==="desktop"?void 0:"mobile"},!0)},[O]);return u.jsxs(u.Fragment,{children:[u.jsx(qa,{devMode:x,name:l,navigate:O,params:I,searchParams:A,structureParams:W,children:u.jsx(Oa,{navigate:O,children:u.jsx(Na,{params:I,children:u.jsx(Gs,{comlink:S,children:u.jsx(qo,{"data-testid":"presentation-root",height:"fill",children:u.jsxs(aa,{children:[u.jsx(Ee,{}),u.jsx(Dt,{id:"preview",minWidth:325,defaultSize:je?50:75,order:3,children:u.jsx(ne,{direction:"column",flex:1,height:"fill",ref:me,children:u.jsx(hr,{element:_e,children:u.jsx(zn,{canSharePreviewAccess:P,canToggleSharePreviewAccess:t,canUseSharedPreviewAccess:s,dispatch:q,header:p,iframe:U.iframe,initialUrl:w,loadersConnection:le,navigatorEnabled:je,onPathChange:J,onRefresh:Re,openPopup:K,overlaysConnection:Z,previewUrl:I.preview,perspective:f,ref:C,setViewport:Te,targetOrigin:j,toggleNavigator:ge,toggleOverlay:oe,viewport:Q,visualEditing:U.visualEditing,vercelProtectionBypass:a},j)})})}),u.jsx($a,{documentId:I.id,documentsOnPage:V,documentType:I.type,getCommentIntent:Ce,mainDocumentState:z,onFocusPath:ee,onStructureParams:ae,searchParams:A,setDisplayedDocument:fe,structureParams:W})]})})})})})}),u.jsxs(y.Suspense,{children:[_&&u.jsx(Oo,{controller:_,perspective:f,liveDocument:he,onDocumentsOnPage:Y,onLoadersConnection:B}),S&&I.id&&I.type&&u.jsx(zo,{comlink:S,id:I.id,type:I.type,loadersConnection:le,previewKitConnection:F}),S&&u.jsx(Do,{comlink:S,perspective:f}),S&&V.length>0&&u.jsx(Uo,{comlink:S,perspective:f,refs:V}),S&&u.jsx(Lo,{comlink:S,perspective:f}),S&&u.jsx(Hs,{comlink:S}),S&&u.jsx(Wo,{comlink:S,perspective:f}),S&&u.jsx(No,{comlink:S})]})]})}function en(n){return n.key==="Alt"}const Vo=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),tn={alt:"altKey",ctrl:"ctrlKey",mod:Vo?"metaKey":"ctrlKey",shift:"shiftKey"};function Bo(n,e){return n.every(t=>tn[t]?e[tn[t]]:e.key===t.toUpperCase())}function Ho(){const n=L.c(7);let e;n[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:He},n[0]=e):e=n[0];const t=Be(e),[s,r]=y.useReducer(Ko,"loading"),[a,o]=y.useState(null);let i,l;n[1]!==t?(i=()=>{const p=Vs(t,d=>{o(d),r()});return()=>p()},l=[t],n[1]=t,n[2]=i,n[3]=l):(i=n[2],l=n[3]),y.useEffect(i,l);let c;return n[4]!==s||n[5]!==a?(c=[a,s],n[4]=s,n[5]=a,n[6]=c):c=n[6],c}function Ko(){return"ready"}function Go(n){const e=L.c(17),{t}=ve(ye),{previewUrl:s}=n.tool.options??{},{push:r}=cn(),a=typeof s=="object"||typeof s=="function",o=sr(),[i,l]=y.useState(null),[c,p]=y.useState(null),[d,h]=y.useState(null),[m,g]=y.useState(null);let b,v;e[0]!==o||e[1]!==a?(b=()=>{if(!a)return;const E=o.checkDocumentPermission("create",{_id:$e,_type:qe}).subscribe(l),T=o.checkDocumentPermission("update",{_id:$e,_type:qe}).subscribe(p),M=o.checkDocumentPermission("read",{_id:$e,_type:qe}).subscribe(h),k=o.checkDocumentPermission("create",{_id:`drafts.${an()}`,_type:on}).subscribe(g);return()=>{E.unsubscribe(),T.unsubscribe(),M.unsubscribe(),k.unsubscribe()}},v=[o,a],e[0]=o,e[1]=a,e[2]=b,e[3]=v):(b=e[2],v=e[3]),y.useEffect(b,v);const f=m==null?void 0:m.granted;let w,P;e[4]!==f||e[5]!==r||e[6]!==t||e[7]!==a?(w=()=>{if(!a||f!==!1)return;const E=requestAnimationFrame(()=>r({closable:!0,status:"error",duration:3e4,title:t("preview-url-secret.missing-grants")}));return()=>cancelAnimationFrame(E)},P=[f,r,t,a],e[4]=f,e[5]=r,e[6]=t,e[7]=a,e[8]=w,e[9]=P):(w=e[8],P=e[9]),y.useEffect(w,P);const[x,j]=Ho();if(j==="loading"||a&&(!i||typeof i.granted>"u"||!c||typeof c.granted>"u"||!m||!d||typeof d.granted>"u"||typeof m.granted>"u")){let E;return e[10]===Symbol.for("react.memo_cache_sentinel")?(E=u.jsx(ln,{}),e[10]=E):E=e[10],E}const C=f===!0,_=(i==null?void 0:i.granted)===!0&&(c==null?void 0:c.granted)===!0,R=(d==null?void 0:d.granted)===!0;let S;return e[11]!==n||e[12]!==C||e[13]!==_||e[14]!==R||e[15]!==x?(S=u.jsx(Fo,{...n,vercelProtectionBypass:x,canCreateUrlPreviewSecrets:C,canToggleSharePreviewAccess:_,canUseSharedPreviewAccess:R}),e[11]=n,e[12]=C,e[13]=_,e[14]=R,e[15]=x,e[16]=S):S=e[16],S}const Yo=Object.freeze(Object.defineProperty({__proto__:null,default:Go},Symbol.toStringTag,{value:"Module"}));export{Yo as P,Kt as a,rt as c};
